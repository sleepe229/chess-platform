2026-02-02 19:12:59 [main] INFO  com.chess.user.it.UserServiceIT [traceId=] - Starting UserServiceIT using Java 21.0.9 with PID 47371 (started by stepan in /home/stepan/IdeaProjects/project/chess/chess-user-service)
2026-02-02 19:12:59 [main] DEBUG com.chess.user.it.UserServiceIT [traceId=] - Running with Spring Boot v4.0.2, Spring v7.0.3
2026-02-02 19:12:59 [main] INFO  com.chess.user.it.UserServiceIT [traceId=] - The following 1 profile is active: "it"
2026-02-02 19:13:00 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate [traceId=] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-02 19:13:00 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate [traceId=] - Finished Spring Data repository scanning in 33 ms. Found 4 JPA repository interfaces.
2026-02-02 19:13:01 [main] INFO  o.s.boot.tomcat.TomcatWebServer [traceId=] - Tomcat initialized with port 0 (http)
2026-02-02 19:13:01 [main] INFO  o.a.catalina.core.StandardService [traceId=] - Starting service [Tomcat]
2026-02-02 19:13:01 [main] INFO  o.a.catalina.core.StandardEngine [traceId=] - Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-02-02 19:13:01 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer [traceId=] - Root WebApplicationContext: initialization completed in 1067 ms
2026-02-02 19:13:01 [main] DEBUG com.chess.user.config.JwtConfig [traceId=] - JWT Token Provider initialized for user-service
2026-02-02 19:13:01 [main] DEBUG c.c.u.s.JwtAuthenticationFilter [traceId=] - Filter 'jwtAuthenticationFilter' configured for use
2026-02-02 19:13:01 [main] DEBUG c.c.user.filter.RequestIdMdcFilter [traceId=] - Filter 'requestIdMdcFilter' configured for use
2026-02-02 19:13:01 [main] INFO  com.zaxxer.hikari.HikariDataSource [traceId=] - HikariPool-1 - Starting...
2026-02-02 19:13:01 [main] INFO  com.zaxxer.hikari.pool.HikariPool [traceId=] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3e5ed0d4
2026-02-02 19:13:01 [main] INFO  com.zaxxer.hikari.HikariDataSource [traceId=] - HikariPool-1 - Start completed.
2026-02-02 19:13:01 [main] INFO  org.flywaydb.core.FlywayExecutor [traceId=] - Database: jdbc:postgresql://localhost:32773/user_it?loggerLevel=OFF (PostgreSQL 16.11)
2026-02-02 19:13:01 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory [traceId=] - Schema history table "public"."flyway_schema_history" does not exist yet
2026-02-02 19:13:01 [main] INFO  o.f.core.internal.command.DbValidate [traceId=] - Successfully validated 4 migrations (execution time 00:00.010s)
2026-02-02 19:13:01 [main] INFO  org.flywaydb.core.Flyway [traceId=] - All configured schemas are empty; baseline operation skipped. A baseline or migration script with a lower version than the baseline version may execute if available. Check the Schemas parameter if this is not intended.
2026-02-02 19:13:01 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory [traceId=] - Creating Schema History table "public"."flyway_schema_history" ...
2026-02-02 19:13:01 [main] INFO  o.f.core.internal.command.DbMigrate [traceId=] - Current version of schema "public": << Empty Schema >>
2026-02-02 19:13:01 [main] INFO  o.f.core.internal.command.DbMigrate [traceId=] - Migrating schema "public" to version "1 - create users"
2026-02-02 19:13:01 [main] INFO  o.f.core.internal.command.DbMigrate [traceId=] - Migrating schema "public" to version "2 - create ratings"
2026-02-02 19:13:01 [main] INFO  o.f.core.internal.command.DbMigrate [traceId=] - Migrating schema "public" to version "3 - create rating history"
2026-02-02 19:13:01 [main] INFO  o.f.core.internal.command.DbMigrate [traceId=] - Migrating schema "public" to version "4 - create processed event ids"
2026-02-02 19:13:01 [main] INFO  o.f.core.internal.command.DbMigrate [traceId=] - Successfully applied 4 migrations to schema "public", now at version v4 (execution time 00:00.022s)
2026-02-02 19:13:01 [main] INFO  org.hibernate.orm.jpa [traceId=] - HHH008540: Processing PersistenceUnitInfo [name: default]
2026-02-02 19:13:01 [main] INFO  org.hibernate.orm.core [traceId=] - HHH000001: Hibernate ORM core version 7.2.1.Final
2026-02-02 19:13:01 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo [traceId=] - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-02 19:13:01 [main] WARN  org.hibernate.orm.deprecation [traceId=] - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-02 19:13:01 [main] INFO  o.hibernate.orm.connections.pooling [traceId=] - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:32773/user_it?loggerLevel=OFF]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: user_it/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DataSourceConnectionProvider
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-02 19:13:02 [main] INFO  org.hibernate.orm.core [traceId=] - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-02 19:13:02 [main] INFO  org.hibernate.orm.jdbc.batch [traceId=] - HHH100501: Automatic JDBC statement batching enabled (maximum batch size 20)
2026-02-02 19:13:02 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean [traceId=] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-02 19:13:02 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories [traceId=] - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-02 19:13:02 [main] INFO  com.chess.user.config.NatsConfig [traceId=] - Connected to NATS server: nats://localhost:32774
2026-02-02 19:13:02 [pool-3-thread-1] INFO  com.chess.user.config.NatsConfig [traceId=] - NATS connection established: nats://localhost:32774
2026-02-02 19:13:02 [main] INFO  com.chess.user.config.NatsConfig [traceId=] - Created JetStream stream: AUTH_EVENTS subjects=domain.auth.UserRegistered
2026-02-02 19:13:02 [main] INFO  com.chess.user.config.NatsConfig [traceId=] - Created JetStream stream: USER_EVENTS subjects=domain.users.RatingUpdated
2026-02-02 19:13:02 [main] ERROR c.c.u.m.GameFinishedEventListener [traceId=] - Failed to initialize JetStream subscription to domain.game.GameFinished
java.lang.IllegalStateException: [SUB-90007] No matching streams for subject.
	at io.nats.client.support.NatsJetStreamClientError._instance(NatsJetStreamClientError.java:109)
	at io.nats.client.support.NatsJetStreamClientError.instance(NatsJetStreamClientError.java:98)
	at io.nats.client.impl.NatsJetStream.createSubscription(NatsJetStream.java:337)
	at io.nats.client.impl.NatsJetStream.subscribe(NatsJetStream.java:640)
	at com.chess.user.messaging.GameFinishedEventListener.init(GameFinishedEventListener.java:71)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:453)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:397)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:217)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:426)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1809)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:603)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:525)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:371)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:331)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:196)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1218)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1184)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1121)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:993)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:620)
	at org.springframework.boot.web.server.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:143)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:756)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:445)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:321)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$2(SpringBootContextLoader.java:156)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1465)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:605)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:156)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:115)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:247)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.lambda$loadContext$0(DefaultCacheAwareContextLoaderDelegate.java:167)
	at org.springframework.test.context.cache.DefaultContextCache.put(DefaultContextCache.java:214)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:160)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:128)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:155)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:111)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:205)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$1(ClassBasedTestDescriptor.java:423)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:428)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$0(ClassBasedTestDescriptor.java:422)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:422)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$0(ClassBasedTestDescriptor.java:334)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:74)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:333)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$1(ClassBasedTestDescriptor.java:322)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$0(ClassBasedTestDescriptor.java:321)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:27)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$before$0(ClassBasedTestDescriptor.java:240)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:74)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:239)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:88)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$2(NodeTestTask.java:173)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:74)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$1(NodeTestTask.java:166)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$0(NodeTestTask.java:164)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:74)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:163)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:116)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:42)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$2(NodeTestTask.java:180)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:74)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$1(NodeTestTask.java:166)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$0(NodeTestTask.java:164)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:74)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:163)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:116)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:36)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:52)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.executeEngine(EngineExecutionOrchestrator.java:246)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.failOrExecuteEngine(EngineExecutionOrchestrator.java:218)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:179)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:66)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:157)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:65)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:125)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:93)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:48)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$0(InterceptingLauncher.java:41)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:40)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:48)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2026-02-02 19:13:02 [main] INFO  c.c.user.messaging.UserEventListener [traceId=] - JetStream subscribed to domain.auth.UserRegistered
2026-02-02 19:13:02 [main] WARN  o.s.b.s.a.UserDetailsServiceAutoConfiguration [traceId=] - 

Using generated security password: cef858e1-bd05-40f5-b5ca-d515300a7894

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-02-02 19:13:02 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer [traceId=] - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-02-02 19:13:02 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain [traceId=] - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-02-02 19:13:03 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver [traceId=] - Exposing 4 endpoints beneath base path '/actuator'
2026-02-02 19:13:03 [main] INFO  o.s.boot.tomcat.TomcatWebServer [traceId=] - Tomcat started on port 35383 (http) with context path '/'
2026-02-02 19:13:03 [main] INFO  com.chess.user.it.UserServiceIT [traceId=] - Started UserServiceIT in 3.527 seconds (process running for 6.133)
2026-02-02 19:13:03 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        count(*) 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        )=(
            ?, ?
        )
2026-02-02 19:13:03 [user-service:5] INFO  c.c.user.messaging.UserEventListener [traceId=] - Received UserRegistered event: userId=383bdd42-4101-45db-9294-da1e3849fb67, email=it-user@mail.com
2026-02-02 19:13:03 [user-service:5] INFO  com.chess.user.service.UserService [traceId=] - Creating user profile for userId: 383bdd42-4101-45db-9294-da1e3849fb67, email: it-user@mail.com
2026-02-02 19:13:03 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        count(*) 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:13:03 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    fetch
        first ? rows only
2026-02-02 19:13:03 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:13:03 [user-service:5] INFO  c.chess.user.service.RatingService [traceId=] - Initializing ratings for userId: 383bdd42-4101-45db-9294-da1e3849fb67
2026-02-02 19:13:03 [user-service:5] INFO  c.chess.user.service.RatingService [traceId=] - Ratings initialized for userId: 383bdd42-4101-45db-9294-da1e3849fb67
2026-02-02 19:13:03 [user-service:5] INFO  com.chess.user.service.UserService [traceId=] - User profile created: 383bdd42-4101-45db-9294-da1e3849fb67
2026-02-02 19:13:03 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        users
        (avatar_url, bio, country, created_at, email, total_draws, total_games, total_losses, total_wins, updated_at, username, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:13:03 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:13:03 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:13:03 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:13:03 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:13:03 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        pee1_0.consumer,
        pee1_0.event_id,
        pee1_0.processed_at 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        ) in ((?, ?))
2026-02-02 19:13:03 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        processed_event_ids
        (processed_at, consumer, event_id) 
    values
        (?, ?, ?)
2026-02-02 19:13:04 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] [traceId=] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-02 19:13:04 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet [traceId=] - Initializing Servlet 'dispatcherServlet'
2026-02-02 19:13:04 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet [traceId=] - Completed initialization in 1 ms
2026-02-02 19:13:04 [http-nio-auto-1-exec-1] DEBUG o.s.security.web.FilterChainProxy [traceId=e033900d-1c99-4300-90c8-cc63b27f8a23] - Securing GET /users/383bdd42-4101-45db-9294-da1e3849fb67
2026-02-02 19:13:04 [http-nio-auto-1-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=e033900d-1c99-4300-90c8-cc63b27f8a23] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:13:04 [http-nio-auto-1-exec-1] DEBUG o.s.security.web.FilterChainProxy [traceId=e033900d-1c99-4300-90c8-cc63b27f8a23] - Secured GET /users/383bdd42-4101-45db-9294-da1e3849fb67
2026-02-02 19:13:04 [http-nio-auto-1-exec-1] INFO  c.c.user.controller.UserController [traceId=e033900d-1c99-4300-90c8-cc63b27f8a23] - GET /users/383bdd42-4101-45db-9294-da1e3849fb67
2026-02-02 19:13:04 [http-nio-auto-1-exec-1] DEBUG org.hibernate.SQL [traceId=e033900d-1c99-4300-90c8-cc63b27f8a23] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:13:04 [http-nio-auto-1-exec-1] DEBUG org.hibernate.SQL [traceId=e033900d-1c99-4300-90c8-cc63b27f8a23] - 
    select
        r1_0.id,
        r1_0.games_played,
        r1_0.peak_rating,
        r1_0.rating,
        r1_0.rating_deviation,
        r1_0.time_control,
        r1_0.updated_at,
        r1_0.user_id,
        r1_0.volatility 
    from
        ratings r1_0 
    where
        r1_0.user_id=?
2026-02-02 19:13:04 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        count(*) 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        )=(
            ?, ?
        )
2026-02-02 19:13:04 [user-service:5] INFO  c.c.user.messaging.UserEventListener [traceId=] - Received UserRegistered event: userId=70d0b244-41ac-4c4d-9806-9b5b89331de0, email=white@mail.com
2026-02-02 19:13:04 [user-service:5] INFO  com.chess.user.service.UserService [traceId=] - Creating user profile for userId: 70d0b244-41ac-4c4d-9806-9b5b89331de0, email: white@mail.com
2026-02-02 19:13:04 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        count(*) 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:13:04 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    fetch
        first ? rows only
2026-02-02 19:13:04 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:13:04 [user-service:5] INFO  c.chess.user.service.RatingService [traceId=] - Initializing ratings for userId: 70d0b244-41ac-4c4d-9806-9b5b89331de0
2026-02-02 19:13:04 [user-service:5] INFO  c.chess.user.service.RatingService [traceId=] - Ratings initialized for userId: 70d0b244-41ac-4c4d-9806-9b5b89331de0
2026-02-02 19:13:04 [user-service:5] INFO  com.chess.user.service.UserService [traceId=] - User profile created: 70d0b244-41ac-4c4d-9806-9b5b89331de0
2026-02-02 19:13:04 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        users
        (avatar_url, bio, country, created_at, email, total_draws, total_games, total_losses, total_wins, updated_at, username, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:13:04 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:13:04 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:13:04 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:13:04 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:13:04 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        pee1_0.consumer,
        pee1_0.event_id,
        pee1_0.processed_at 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        ) in ((?, ?))
2026-02-02 19:13:04 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        processed_event_ids
        (processed_at, consumer, event_id) 
    values
        (?, ?, ?)
2026-02-02 19:13:04 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        count(*) 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        )=(
            ?, ?
        )
2026-02-02 19:13:04 [user-service:5] INFO  c.c.user.messaging.UserEventListener [traceId=] - Received UserRegistered event: userId=8b006c4d-ddd1-49e1-ac7f-2f546070376b, email=black@mail.com
2026-02-02 19:13:04 [user-service:5] INFO  com.chess.user.service.UserService [traceId=] - Creating user profile for userId: 8b006c4d-ddd1-49e1-ac7f-2f546070376b, email: black@mail.com
2026-02-02 19:13:04 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        count(*) 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:13:04 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    fetch
        first ? rows only
2026-02-02 19:13:04 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:13:04 [user-service:5] INFO  c.chess.user.service.RatingService [traceId=] - Initializing ratings for userId: 8b006c4d-ddd1-49e1-ac7f-2f546070376b
2026-02-02 19:13:04 [user-service:5] INFO  c.chess.user.service.RatingService [traceId=] - Ratings initialized for userId: 8b006c4d-ddd1-49e1-ac7f-2f546070376b
2026-02-02 19:13:04 [user-service:5] INFO  com.chess.user.service.UserService [traceId=] - User profile created: 8b006c4d-ddd1-49e1-ac7f-2f546070376b
2026-02-02 19:13:04 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        users
        (avatar_url, bio, country, created_at, email, total_draws, total_games, total_losses, total_wins, updated_at, username, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:13:04 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:13:04 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:13:04 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:13:04 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:13:04 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        pee1_0.consumer,
        pee1_0.event_id,
        pee1_0.processed_at 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        ) in ((?, ?))
2026-02-02 19:13:04 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        processed_event_ids
        (processed_at, consumer, event_id) 
    values
        (?, ?, ?)
2026-02-02 19:13:04 [http-nio-auto-1-exec-2] DEBUG o.s.security.web.FilterChainProxy [traceId=d3c86f99-d4a2-4ddf-87e2-a39fb50f01fc] - Securing GET /users/70d0b244-41ac-4c4d-9806-9b5b89331de0
2026-02-02 19:13:04 [http-nio-auto-1-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=d3c86f99-d4a2-4ddf-87e2-a39fb50f01fc] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:13:04 [http-nio-auto-1-exec-2] DEBUG o.s.security.web.FilterChainProxy [traceId=d3c86f99-d4a2-4ddf-87e2-a39fb50f01fc] - Secured GET /users/70d0b244-41ac-4c4d-9806-9b5b89331de0
2026-02-02 19:13:04 [http-nio-auto-1-exec-2] INFO  c.c.user.controller.UserController [traceId=d3c86f99-d4a2-4ddf-87e2-a39fb50f01fc] - GET /users/70d0b244-41ac-4c4d-9806-9b5b89331de0
2026-02-02 19:13:04 [http-nio-auto-1-exec-2] DEBUG org.hibernate.SQL [traceId=d3c86f99-d4a2-4ddf-87e2-a39fb50f01fc] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:13:04 [http-nio-auto-1-exec-2] DEBUG org.hibernate.SQL [traceId=d3c86f99-d4a2-4ddf-87e2-a39fb50f01fc] - 
    select
        r1_0.id,
        r1_0.games_played,
        r1_0.peak_rating,
        r1_0.rating,
        r1_0.rating_deviation,
        r1_0.time_control,
        r1_0.updated_at,
        r1_0.user_id,
        r1_0.volatility 
    from
        ratings r1_0 
    where
        r1_0.user_id=?
2026-02-02 19:13:04 [http-nio-auto-1-exec-3] DEBUG o.s.security.web.FilterChainProxy [traceId=6086d9c1-dc9f-423b-820b-85aae31e1757] - Securing GET /users/8b006c4d-ddd1-49e1-ac7f-2f546070376b
2026-02-02 19:13:04 [http-nio-auto-1-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=6086d9c1-dc9f-423b-820b-85aae31e1757] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:13:04 [http-nio-auto-1-exec-3] DEBUG o.s.security.web.FilterChainProxy [traceId=6086d9c1-dc9f-423b-820b-85aae31e1757] - Secured GET /users/8b006c4d-ddd1-49e1-ac7f-2f546070376b
2026-02-02 19:13:04 [http-nio-auto-1-exec-3] INFO  c.c.user.controller.UserController [traceId=6086d9c1-dc9f-423b-820b-85aae31e1757] - GET /users/8b006c4d-ddd1-49e1-ac7f-2f546070376b
2026-02-02 19:13:04 [http-nio-auto-1-exec-3] DEBUG org.hibernate.SQL [traceId=6086d9c1-dc9f-423b-820b-85aae31e1757] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:13:04 [http-nio-auto-1-exec-3] DEBUG org.hibernate.SQL [traceId=6086d9c1-dc9f-423b-820b-85aae31e1757] - 
    select
        r1_0.id,
        r1_0.games_played,
        r1_0.peak_rating,
        r1_0.rating,
        r1_0.rating_deviation,
        r1_0.time_control,
        r1_0.updated_at,
        r1_0.user_id,
        r1_0.volatility 
    from
        ratings r1_0 
    where
        r1_0.user_id=?
2026-02-02 19:13:04 [main] WARN  o.j.j.e.d.AbstractExtensionContext [traceId=] - Type implements CloseableResource but not AutoCloseable: org.testcontainers.junit.jupiter.TestcontainersExtension$StoreAdapter
2026-02-02 19:13:04 [pool-3-thread-1] ERROR com.chess.user.config.NatsConfig [traceId=] - NATS exception occurred
java.io.IOException: Read channel closed.
	at io.nats.client.impl.NatsConnectionReader.run(NatsConnectionReader.java:186)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-02 19:13:04 [pool-3-thread-1] WARN  com.chess.user.config.NatsConfig [traceId=] - NATS connection disconnected: nats://localhost:32774
2026-02-02 19:13:04 [pool-3-thread-1] ERROR com.chess.user.config.NatsConfig [traceId=] - NATS exception occurred
java.util.concurrent.ExecutionException: java.io.IOException: Failed to read initial info message.
	at java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)
	at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:205)
	at io.nats.client.impl.NatsConnection.tryToConnect(NatsConnection.java:613)
	at io.nats.client.impl.NatsConnection.reconnectImpl(NatsConnection.java:451)
	at io.nats.client.impl.NatsConnection.closeSocket(NatsConnection.java:827)
	at io.nats.client.impl.NatsConnection.lambda$handleCommunicationIssue$10(NatsConnection.java:775)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.io.IOException: Failed to read initial info message.
	at io.nats.client.impl.NatsConnection.readInitialInfo(NatsConnection.java:1790)
	at io.nats.client.impl.NatsConnection.lambda$tryToConnect$7(NatsConnection.java:592)
	... 4 common frames omitted
2026-02-02 19:13:04 [pool-3-thread-1] WARN  com.chess.user.config.NatsConfig [traceId=] - NATS connection disconnected: nats://localhost:32774
2026-02-02 19:13:04 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown [traceId=] - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-02 19:13:04 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown [traceId=] - Graceful shutdown complete
2026-02-02 19:13:04 [pool-3-thread-1] WARN  com.chess.user.config.NatsConfig [traceId=] - NATS connection closed: nats://localhost:32774
2026-02-02 19:13:04 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean [traceId=] - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-02 19:13:04 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource [traceId=] - HikariPool-1 - Shutdown initiated...
2026-02-02 19:13:04 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource [traceId=] - HikariPool-1 - Shutdown completed.
2026-02-02 19:14:08 [main] INFO  com.chess.user.it.UserServiceIT [traceId=] - Starting UserServiceIT using Java 21.0.9 with PID 48169 (started by stepan in /home/stepan/IdeaProjects/project/chess/chess-user-service)
2026-02-02 19:14:08 [main] DEBUG com.chess.user.it.UserServiceIT [traceId=] - Running with Spring Boot v4.0.2, Spring v7.0.3
2026-02-02 19:14:08 [main] INFO  com.chess.user.it.UserServiceIT [traceId=] - The following 1 profile is active: "it"
2026-02-02 19:14:09 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate [traceId=] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-02 19:14:09 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate [traceId=] - Finished Spring Data repository scanning in 25 ms. Found 4 JPA repository interfaces.
2026-02-02 19:14:09 [main] INFO  o.s.boot.tomcat.TomcatWebServer [traceId=] - Tomcat initialized with port 0 (http)
2026-02-02 19:14:09 [main] INFO  o.a.catalina.core.StandardService [traceId=] - Starting service [Tomcat]
2026-02-02 19:14:09 [main] INFO  o.a.catalina.core.StandardEngine [traceId=] - Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-02-02 19:14:09 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer [traceId=] - Root WebApplicationContext: initialization completed in 849 ms
2026-02-02 19:14:09 [main] DEBUG com.chess.user.config.JwtConfig [traceId=] - JWT Token Provider initialized for user-service
2026-02-02 19:14:09 [main] DEBUG c.c.u.s.JwtAuthenticationFilter [traceId=] - Filter 'jwtAuthenticationFilter' configured for use
2026-02-02 19:14:09 [main] DEBUG c.c.user.filter.RequestIdMdcFilter [traceId=] - Filter 'requestIdMdcFilter' configured for use
2026-02-02 19:14:10 [main] INFO  com.zaxxer.hikari.HikariDataSource [traceId=] - HikariPool-1 - Starting...
2026-02-02 19:14:10 [main] INFO  com.zaxxer.hikari.pool.HikariPool [traceId=] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@293ba26c
2026-02-02 19:14:10 [main] INFO  com.zaxxer.hikari.HikariDataSource [traceId=] - HikariPool-1 - Start completed.
2026-02-02 19:14:10 [main] INFO  org.flywaydb.core.FlywayExecutor [traceId=] - Database: jdbc:postgresql://localhost:32776/user_it?loggerLevel=OFF (PostgreSQL 16.11)
2026-02-02 19:14:10 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory [traceId=] - Schema history table "public"."flyway_schema_history" does not exist yet
2026-02-02 19:14:10 [main] INFO  o.f.core.internal.command.DbValidate [traceId=] - Successfully validated 4 migrations (execution time 00:00.010s)
2026-02-02 19:14:10 [main] INFO  org.flywaydb.core.Flyway [traceId=] - All configured schemas are empty; baseline operation skipped. A baseline or migration script with a lower version than the baseline version may execute if available. Check the Schemas parameter if this is not intended.
2026-02-02 19:14:10 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory [traceId=] - Creating Schema History table "public"."flyway_schema_history" ...
2026-02-02 19:14:10 [main] INFO  o.f.core.internal.command.DbMigrate [traceId=] - Current version of schema "public": << Empty Schema >>
2026-02-02 19:14:10 [main] INFO  o.f.core.internal.command.DbMigrate [traceId=] - Migrating schema "public" to version "1 - create users"
2026-02-02 19:14:10 [main] INFO  o.f.core.internal.command.DbMigrate [traceId=] - Migrating schema "public" to version "2 - create ratings"
2026-02-02 19:14:10 [main] INFO  o.f.core.internal.command.DbMigrate [traceId=] - Migrating schema "public" to version "3 - create rating history"
2026-02-02 19:14:10 [main] INFO  o.f.core.internal.command.DbMigrate [traceId=] - Migrating schema "public" to version "4 - create processed event ids"
2026-02-02 19:14:10 [main] INFO  o.f.core.internal.command.DbMigrate [traceId=] - Successfully applied 4 migrations to schema "public", now at version v4 (execution time 00:00.019s)
2026-02-02 19:14:10 [main] INFO  org.hibernate.orm.jpa [traceId=] - HHH008540: Processing PersistenceUnitInfo [name: default]
2026-02-02 19:14:10 [main] INFO  org.hibernate.orm.core [traceId=] - HHH000001: Hibernate ORM core version 7.2.1.Final
2026-02-02 19:14:10 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo [traceId=] - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-02 19:14:10 [main] WARN  org.hibernate.orm.deprecation [traceId=] - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-02 19:14:10 [main] INFO  o.hibernate.orm.connections.pooling [traceId=] - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:32776/user_it?loggerLevel=OFF]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: user_it/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DataSourceConnectionProvider
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-02 19:14:11 [main] INFO  org.hibernate.orm.core [traceId=] - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-02 19:14:11 [main] INFO  org.hibernate.orm.jdbc.batch [traceId=] - HHH100501: Automatic JDBC statement batching enabled (maximum batch size 20)
2026-02-02 19:14:11 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean [traceId=] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-02 19:14:11 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories [traceId=] - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-02 19:14:11 [main] INFO  com.chess.user.config.NatsConfig [traceId=] - Connected to NATS server: nats://localhost:32777
2026-02-02 19:14:11 [pool-3-thread-1] INFO  com.chess.user.config.NatsConfig [traceId=] - NATS connection established: nats://localhost:32777
2026-02-02 19:14:11 [main] INFO  com.chess.user.config.NatsConfig [traceId=] - Created JetStream stream: AUTH_EVENTS subjects=domain.auth.UserRegistered
2026-02-02 19:14:11 [main] INFO  com.chess.user.config.NatsConfig [traceId=] - Created JetStream stream: USER_EVENTS subjects=domain.users.RatingUpdated
2026-02-02 19:14:11 [main] ERROR c.c.u.m.GameFinishedEventListener [traceId=] - Failed to initialize JetStream subscription to domain.game.GameFinished
java.lang.IllegalStateException: [SUB-90007] No matching streams for subject.
	at io.nats.client.support.NatsJetStreamClientError._instance(NatsJetStreamClientError.java:109)
	at io.nats.client.support.NatsJetStreamClientError.instance(NatsJetStreamClientError.java:98)
	at io.nats.client.impl.NatsJetStream.createSubscription(NatsJetStream.java:337)
	at io.nats.client.impl.NatsJetStream.subscribe(NatsJetStream.java:640)
	at com.chess.user.messaging.GameFinishedEventListener.init(GameFinishedEventListener.java:71)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:453)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:397)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:217)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:426)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1809)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:603)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:525)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:371)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:331)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:196)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1218)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1184)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1121)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:993)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:620)
	at org.springframework.boot.web.server.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:143)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:756)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:445)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:321)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$2(SpringBootContextLoader.java:156)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1465)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:605)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:156)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:115)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:247)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.lambda$loadContext$0(DefaultCacheAwareContextLoaderDelegate.java:167)
	at org.springframework.test.context.cache.DefaultContextCache.put(DefaultContextCache.java:214)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:160)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:128)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:155)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:111)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:205)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$1(ClassBasedTestDescriptor.java:423)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:428)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$0(ClassBasedTestDescriptor.java:422)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:422)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$0(ClassBasedTestDescriptor.java:334)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:74)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:333)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$1(ClassBasedTestDescriptor.java:322)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$0(ClassBasedTestDescriptor.java:321)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:27)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$before$0(ClassBasedTestDescriptor.java:240)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:74)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:239)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:88)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$2(NodeTestTask.java:173)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:74)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$1(NodeTestTask.java:166)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$0(NodeTestTask.java:164)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:74)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:163)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:116)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:42)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$2(NodeTestTask.java:180)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:74)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$1(NodeTestTask.java:166)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$0(NodeTestTask.java:164)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:74)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:163)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:116)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:36)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:52)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.executeEngine(EngineExecutionOrchestrator.java:246)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.failOrExecuteEngine(EngineExecutionOrchestrator.java:218)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:179)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:66)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:157)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:65)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:125)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:93)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:48)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$0(InterceptingLauncher.java:41)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:40)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:48)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2026-02-02 19:14:11 [main] INFO  c.c.user.messaging.UserEventListener [traceId=] - JetStream subscribed to domain.auth.UserRegistered
2026-02-02 19:14:11 [main] WARN  o.s.b.s.a.UserDetailsServiceAutoConfiguration [traceId=] - 

Using generated security password: 01f58579-3ab7-4d90-bb9d-64f68ecd22a8

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-02-02 19:14:11 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer [traceId=] - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-02-02 19:14:11 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain [traceId=] - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-02-02 19:14:11 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver [traceId=] - Exposing 4 endpoints beneath base path '/actuator'
2026-02-02 19:14:11 [main] INFO  o.s.boot.tomcat.TomcatWebServer [traceId=] - Tomcat started on port 40977 (http) with context path '/'
2026-02-02 19:14:11 [main] INFO  com.chess.user.it.UserServiceIT [traceId=] - Started UserServiceIT in 3.141 seconds (process running for 5.679)
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        count(*) 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        )=(
            ?, ?
        )
2026-02-02 19:14:12 [user-service:5] INFO  c.c.user.messaging.UserEventListener [traceId=] - Received UserRegistered event: userId=73a35a97-bac5-4960-bce8-3839795efaed, email=it-user@mail.com
2026-02-02 19:14:12 [user-service:5] INFO  com.chess.user.service.UserService [traceId=] - Creating user profile for userId: 73a35a97-bac5-4960-bce8-3839795efaed, email: it-user@mail.com
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        count(*) 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    fetch
        first ? rows only
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:14:12 [user-service:5] INFO  c.chess.user.service.RatingService [traceId=] - Initializing ratings for userId: 73a35a97-bac5-4960-bce8-3839795efaed
2026-02-02 19:14:12 [user-service:5] INFO  c.chess.user.service.RatingService [traceId=] - Ratings initialized for userId: 73a35a97-bac5-4960-bce8-3839795efaed
2026-02-02 19:14:12 [user-service:5] INFO  com.chess.user.service.UserService [traceId=] - User profile created: 73a35a97-bac5-4960-bce8-3839795efaed
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        users
        (avatar_url, bio, country, created_at, email, total_draws, total_games, total_losses, total_wins, updated_at, username, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:14:12 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] [traceId=] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-02 19:14:12 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet [traceId=] - Initializing Servlet 'dispatcherServlet'
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        pee1_0.consumer,
        pee1_0.event_id,
        pee1_0.processed_at 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        ) in ((?, ?))
2026-02-02 19:14:12 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet [traceId=] - Completed initialization in 1 ms
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        processed_event_ids
        (processed_at, consumer, event_id) 
    values
        (?, ?, ?)
2026-02-02 19:14:12 [http-nio-auto-1-exec-1] DEBUG o.s.security.web.FilterChainProxy [traceId=de54e5d7-3609-4162-b8dd-6369e48922fc] - Securing GET /users/73a35a97-bac5-4960-bce8-3839795efaed
2026-02-02 19:14:12 [http-nio-auto-1-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=de54e5d7-3609-4162-b8dd-6369e48922fc] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:12 [http-nio-auto-1-exec-1] DEBUG o.s.security.web.FilterChainProxy [traceId=de54e5d7-3609-4162-b8dd-6369e48922fc] - Secured GET /users/73a35a97-bac5-4960-bce8-3839795efaed
2026-02-02 19:14:12 [http-nio-auto-1-exec-1] INFO  c.c.user.controller.UserController [traceId=de54e5d7-3609-4162-b8dd-6369e48922fc] - GET /users/73a35a97-bac5-4960-bce8-3839795efaed
2026-02-02 19:14:12 [http-nio-auto-1-exec-1] DEBUG org.hibernate.SQL [traceId=de54e5d7-3609-4162-b8dd-6369e48922fc] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:14:12 [http-nio-auto-1-exec-1] DEBUG org.hibernate.SQL [traceId=de54e5d7-3609-4162-b8dd-6369e48922fc] - 
    select
        r1_0.id,
        r1_0.games_played,
        r1_0.peak_rating,
        r1_0.rating,
        r1_0.rating_deviation,
        r1_0.time_control,
        r1_0.updated_at,
        r1_0.user_id,
        r1_0.volatility 
    from
        ratings r1_0 
    where
        r1_0.user_id=?
2026-02-02 19:14:12 [http-nio-auto-1-exec-2] DEBUG o.s.security.web.FilterChainProxy [traceId=99a921b9-9285-491c-a171-bb21765b4203] - Securing GET /users/73a35a97-bac5-4960-bce8-3839795efaed/ratings
2026-02-02 19:14:12 [http-nio-auto-1-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=99a921b9-9285-491c-a171-bb21765b4203] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:12 [http-nio-auto-1-exec-2] DEBUG o.s.security.web.FilterChainProxy [traceId=99a921b9-9285-491c-a171-bb21765b4203] - Secured GET /users/73a35a97-bac5-4960-bce8-3839795efaed/ratings
2026-02-02 19:14:12 [http-nio-auto-1-exec-2] INFO  c.c.user.controller.UserController [traceId=99a921b9-9285-491c-a171-bb21765b4203] - GET /users/73a35a97-bac5-4960-bce8-3839795efaed/ratings
2026-02-02 19:14:12 [http-nio-auto-1-exec-2] DEBUG org.hibernate.SQL [traceId=99a921b9-9285-491c-a171-bb21765b4203] - 
    select
        r1_0.id,
        r1_0.games_played,
        r1_0.peak_rating,
        r1_0.rating,
        r1_0.rating_deviation,
        r1_0.time_control,
        r1_0.updated_at,
        r1_0.user_id,
        r1_0.volatility 
    from
        ratings r1_0 
    where
        r1_0.user_id=?
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        count(*) 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        )=(
            ?, ?
        )
2026-02-02 19:14:12 [user-service:5] INFO  c.c.user.messaging.UserEventListener [traceId=] - Received UserRegistered event: userId=c69f1c7f-0308-46f6-aeac-bb9a2fbce99a, email=white@mail.com
2026-02-02 19:14:12 [user-service:5] INFO  com.chess.user.service.UserService [traceId=] - Creating user profile for userId: c69f1c7f-0308-46f6-aeac-bb9a2fbce99a, email: white@mail.com
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        count(*) 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    fetch
        first ? rows only
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:14:12 [user-service:5] INFO  c.chess.user.service.RatingService [traceId=] - Initializing ratings for userId: c69f1c7f-0308-46f6-aeac-bb9a2fbce99a
2026-02-02 19:14:12 [user-service:5] INFO  c.chess.user.service.RatingService [traceId=] - Ratings initialized for userId: c69f1c7f-0308-46f6-aeac-bb9a2fbce99a
2026-02-02 19:14:12 [user-service:5] INFO  com.chess.user.service.UserService [traceId=] - User profile created: c69f1c7f-0308-46f6-aeac-bb9a2fbce99a
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        users
        (avatar_url, bio, country, created_at, email, total_draws, total_games, total_losses, total_wins, updated_at, username, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        pee1_0.consumer,
        pee1_0.event_id,
        pee1_0.processed_at 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        ) in ((?, ?))
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        processed_event_ids
        (processed_at, consumer, event_id) 
    values
        (?, ?, ?)
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        count(*) 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        )=(
            ?, ?
        )
2026-02-02 19:14:12 [user-service:5] INFO  c.c.user.messaging.UserEventListener [traceId=] - Received UserRegistered event: userId=ef3d8603-7101-4c12-8352-0ddc291786f3, email=black@mail.com
2026-02-02 19:14:12 [user-service:5] INFO  com.chess.user.service.UserService [traceId=] - Creating user profile for userId: ef3d8603-7101-4c12-8352-0ddc291786f3, email: black@mail.com
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        count(*) 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    fetch
        first ? rows only
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:14:12 [user-service:5] INFO  c.chess.user.service.RatingService [traceId=] - Initializing ratings for userId: ef3d8603-7101-4c12-8352-0ddc291786f3
2026-02-02 19:14:12 [user-service:5] INFO  c.chess.user.service.RatingService [traceId=] - Ratings initialized for userId: ef3d8603-7101-4c12-8352-0ddc291786f3
2026-02-02 19:14:12 [user-service:5] INFO  com.chess.user.service.UserService [traceId=] - User profile created: ef3d8603-7101-4c12-8352-0ddc291786f3
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        users
        (avatar_url, bio, country, created_at, email, total_draws, total_games, total_losses, total_wins, updated_at, username, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        pee1_0.consumer,
        pee1_0.event_id,
        pee1_0.processed_at 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        ) in ((?, ?))
2026-02-02 19:14:12 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        processed_event_ids
        (processed_at, consumer, event_id) 
    values
        (?, ?, ?)
2026-02-02 19:14:12 [http-nio-auto-1-exec-3] DEBUG o.s.security.web.FilterChainProxy [traceId=26f238ea-1876-41f2-bcd1-088b6591a6d6] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a
2026-02-02 19:14:12 [http-nio-auto-1-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=26f238ea-1876-41f2-bcd1-088b6591a6d6] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:12 [http-nio-auto-1-exec-3] DEBUG o.s.security.web.FilterChainProxy [traceId=26f238ea-1876-41f2-bcd1-088b6591a6d6] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a
2026-02-02 19:14:12 [http-nio-auto-1-exec-3] INFO  c.c.user.controller.UserController [traceId=26f238ea-1876-41f2-bcd1-088b6591a6d6] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a
2026-02-02 19:14:12 [http-nio-auto-1-exec-3] DEBUG org.hibernate.SQL [traceId=26f238ea-1876-41f2-bcd1-088b6591a6d6] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:14:12 [http-nio-auto-1-exec-3] DEBUG org.hibernate.SQL [traceId=26f238ea-1876-41f2-bcd1-088b6591a6d6] - 
    select
        r1_0.id,
        r1_0.games_played,
        r1_0.peak_rating,
        r1_0.rating,
        r1_0.rating_deviation,
        r1_0.time_control,
        r1_0.updated_at,
        r1_0.user_id,
        r1_0.volatility 
    from
        ratings r1_0 
    where
        r1_0.user_id=?
2026-02-02 19:14:12 [http-nio-auto-1-exec-4] DEBUG o.s.security.web.FilterChainProxy [traceId=e5044998-0722-48a7-bf3a-86ff67d039b6] - Securing GET /users/ef3d8603-7101-4c12-8352-0ddc291786f3
2026-02-02 19:14:12 [http-nio-auto-1-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=e5044998-0722-48a7-bf3a-86ff67d039b6] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:12 [http-nio-auto-1-exec-4] DEBUG o.s.security.web.FilterChainProxy [traceId=e5044998-0722-48a7-bf3a-86ff67d039b6] - Secured GET /users/ef3d8603-7101-4c12-8352-0ddc291786f3
2026-02-02 19:14:12 [http-nio-auto-1-exec-4] INFO  c.c.user.controller.UserController [traceId=e5044998-0722-48a7-bf3a-86ff67d039b6] - GET /users/ef3d8603-7101-4c12-8352-0ddc291786f3
2026-02-02 19:14:13 [http-nio-auto-1-exec-4] DEBUG org.hibernate.SQL [traceId=e5044998-0722-48a7-bf3a-86ff67d039b6] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:14:13 [http-nio-auto-1-exec-4] DEBUG org.hibernate.SQL [traceId=e5044998-0722-48a7-bf3a-86ff67d039b6] - 
    select
        r1_0.id,
        r1_0.games_played,
        r1_0.peak_rating,
        r1_0.rating,
        r1_0.rating_deviation,
        r1_0.time_control,
        r1_0.updated_at,
        r1_0.user_id,
        r1_0.volatility 
    from
        ratings r1_0 
    where
        r1_0.user_id=?
2026-02-02 19:14:13 [http-nio-auto-1-exec-5] DEBUG o.s.security.web.FilterChainProxy [traceId=8627a2cc-6325-42e1-9f50-09d14796e3a5] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:13 [http-nio-auto-1-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=8627a2cc-6325-42e1-9f50-09d14796e3a5] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:13 [http-nio-auto-1-exec-5] DEBUG o.s.security.web.FilterChainProxy [traceId=8627a2cc-6325-42e1-9f50-09d14796e3a5] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:13 [http-nio-auto-1-exec-5] INFO  c.c.user.controller.UserController [traceId=8627a2cc-6325-42e1-9f50-09d14796e3a5] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:13 [http-nio-auto-1-exec-5] DEBUG org.hibernate.SQL [traceId=8627a2cc-6325-42e1-9f50-09d14796e3a5] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:13 [http-nio-auto-1-exec-5] WARN  o.s.d.w.c.SpringDataJackson3Configuration$PageModule$WarningLoggingModifier [traceId=8627a2cc-6325-42e1-9f50-09d14796e3a5] - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-02 19:14:13 [http-nio-auto-1-exec-6] DEBUG o.s.security.web.FilterChainProxy [traceId=6e98d1eb-f8ce-4626-9166-96a50cd209d5] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:13 [http-nio-auto-1-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=6e98d1eb-f8ce-4626-9166-96a50cd209d5] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:13 [http-nio-auto-1-exec-6] DEBUG o.s.security.web.FilterChainProxy [traceId=6e98d1eb-f8ce-4626-9166-96a50cd209d5] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:13 [http-nio-auto-1-exec-6] INFO  c.c.user.controller.UserController [traceId=6e98d1eb-f8ce-4626-9166-96a50cd209d5] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:13 [http-nio-auto-1-exec-6] DEBUG org.hibernate.SQL [traceId=6e98d1eb-f8ce-4626-9166-96a50cd209d5] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:14 [http-nio-auto-1-exec-7] DEBUG o.s.security.web.FilterChainProxy [traceId=693d9b91-a074-4abc-8d7e-af4d87be6573] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:14 [http-nio-auto-1-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=693d9b91-a074-4abc-8d7e-af4d87be6573] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:14 [http-nio-auto-1-exec-7] DEBUG o.s.security.web.FilterChainProxy [traceId=693d9b91-a074-4abc-8d7e-af4d87be6573] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:14 [http-nio-auto-1-exec-7] INFO  c.c.user.controller.UserController [traceId=693d9b91-a074-4abc-8d7e-af4d87be6573] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:14 [http-nio-auto-1-exec-7] DEBUG org.hibernate.SQL [traceId=693d9b91-a074-4abc-8d7e-af4d87be6573] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:14 [http-nio-auto-1-exec-8] DEBUG o.s.security.web.FilterChainProxy [traceId=adced5ca-1981-431e-9f60-3c6157be4dd4] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:14 [http-nio-auto-1-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=adced5ca-1981-431e-9f60-3c6157be4dd4] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:14 [http-nio-auto-1-exec-8] DEBUG o.s.security.web.FilterChainProxy [traceId=adced5ca-1981-431e-9f60-3c6157be4dd4] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:14 [http-nio-auto-1-exec-8] INFO  c.c.user.controller.UserController [traceId=adced5ca-1981-431e-9f60-3c6157be4dd4] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:14 [http-nio-auto-1-exec-8] DEBUG org.hibernate.SQL [traceId=adced5ca-1981-431e-9f60-3c6157be4dd4] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:15 [http-nio-auto-1-exec-9] DEBUG o.s.security.web.FilterChainProxy [traceId=3ebb3397-8806-4702-b7e9-1e79679c1edb] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:15 [http-nio-auto-1-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=3ebb3397-8806-4702-b7e9-1e79679c1edb] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:15 [http-nio-auto-1-exec-9] DEBUG o.s.security.web.FilterChainProxy [traceId=3ebb3397-8806-4702-b7e9-1e79679c1edb] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:15 [http-nio-auto-1-exec-9] INFO  c.c.user.controller.UserController [traceId=3ebb3397-8806-4702-b7e9-1e79679c1edb] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:15 [http-nio-auto-1-exec-9] DEBUG org.hibernate.SQL [traceId=3ebb3397-8806-4702-b7e9-1e79679c1edb] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:15 [http-nio-auto-1-exec-10] DEBUG o.s.security.web.FilterChainProxy [traceId=4788fdde-6dac-4d6e-8255-f135c4ecb0ba] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:15 [http-nio-auto-1-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=4788fdde-6dac-4d6e-8255-f135c4ecb0ba] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:15 [http-nio-auto-1-exec-10] DEBUG o.s.security.web.FilterChainProxy [traceId=4788fdde-6dac-4d6e-8255-f135c4ecb0ba] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:15 [http-nio-auto-1-exec-10] INFO  c.c.user.controller.UserController [traceId=4788fdde-6dac-4d6e-8255-f135c4ecb0ba] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:15 [http-nio-auto-1-exec-10] DEBUG org.hibernate.SQL [traceId=4788fdde-6dac-4d6e-8255-f135c4ecb0ba] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:15 [http-nio-auto-1-exec-1] DEBUG o.s.security.web.FilterChainProxy [traceId=8f7ee577-4286-455f-bd90-098c0007ef43] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:15 [http-nio-auto-1-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=8f7ee577-4286-455f-bd90-098c0007ef43] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:15 [http-nio-auto-1-exec-1] DEBUG o.s.security.web.FilterChainProxy [traceId=8f7ee577-4286-455f-bd90-098c0007ef43] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:15 [http-nio-auto-1-exec-1] INFO  c.c.user.controller.UserController [traceId=8f7ee577-4286-455f-bd90-098c0007ef43] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:15 [http-nio-auto-1-exec-1] DEBUG org.hibernate.SQL [traceId=8f7ee577-4286-455f-bd90-098c0007ef43] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:16 [http-nio-auto-1-exec-2] DEBUG o.s.security.web.FilterChainProxy [traceId=e24befda-d5a9-40e3-866d-35568cc41b79] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:16 [http-nio-auto-1-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=e24befda-d5a9-40e3-866d-35568cc41b79] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:16 [http-nio-auto-1-exec-2] DEBUG o.s.security.web.FilterChainProxy [traceId=e24befda-d5a9-40e3-866d-35568cc41b79] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:16 [http-nio-auto-1-exec-2] INFO  c.c.user.controller.UserController [traceId=e24befda-d5a9-40e3-866d-35568cc41b79] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:16 [http-nio-auto-1-exec-2] DEBUG org.hibernate.SQL [traceId=e24befda-d5a9-40e3-866d-35568cc41b79] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:16 [http-nio-auto-1-exec-3] DEBUG o.s.security.web.FilterChainProxy [traceId=c29c7393-f304-414e-a799-74a9773fe4c4] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:16 [http-nio-auto-1-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=c29c7393-f304-414e-a799-74a9773fe4c4] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:16 [http-nio-auto-1-exec-3] DEBUG o.s.security.web.FilterChainProxy [traceId=c29c7393-f304-414e-a799-74a9773fe4c4] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:16 [http-nio-auto-1-exec-3] INFO  c.c.user.controller.UserController [traceId=c29c7393-f304-414e-a799-74a9773fe4c4] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:16 [http-nio-auto-1-exec-3] DEBUG org.hibernate.SQL [traceId=c29c7393-f304-414e-a799-74a9773fe4c4] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:17 [http-nio-auto-1-exec-4] DEBUG o.s.security.web.FilterChainProxy [traceId=1591e3d8-3db3-424e-9dc9-872e81171e9b] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:17 [http-nio-auto-1-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=1591e3d8-3db3-424e-9dc9-872e81171e9b] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:17 [http-nio-auto-1-exec-4] DEBUG o.s.security.web.FilterChainProxy [traceId=1591e3d8-3db3-424e-9dc9-872e81171e9b] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:17 [http-nio-auto-1-exec-4] INFO  c.c.user.controller.UserController [traceId=1591e3d8-3db3-424e-9dc9-872e81171e9b] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:17 [http-nio-auto-1-exec-4] DEBUG org.hibernate.SQL [traceId=1591e3d8-3db3-424e-9dc9-872e81171e9b] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:17 [http-nio-auto-1-exec-5] DEBUG o.s.security.web.FilterChainProxy [traceId=6ffea7af-20c4-4e8d-a350-ceb3521003a3] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:17 [http-nio-auto-1-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=6ffea7af-20c4-4e8d-a350-ceb3521003a3] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:17 [http-nio-auto-1-exec-5] DEBUG o.s.security.web.FilterChainProxy [traceId=6ffea7af-20c4-4e8d-a350-ceb3521003a3] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:17 [http-nio-auto-1-exec-5] INFO  c.c.user.controller.UserController [traceId=6ffea7af-20c4-4e8d-a350-ceb3521003a3] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:17 [http-nio-auto-1-exec-5] DEBUG org.hibernate.SQL [traceId=6ffea7af-20c4-4e8d-a350-ceb3521003a3] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:18 [http-nio-auto-1-exec-6] DEBUG o.s.security.web.FilterChainProxy [traceId=b43a4050-476e-4986-8862-b573b1d3d71e] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:18 [http-nio-auto-1-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=b43a4050-476e-4986-8862-b573b1d3d71e] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:18 [http-nio-auto-1-exec-6] DEBUG o.s.security.web.FilterChainProxy [traceId=b43a4050-476e-4986-8862-b573b1d3d71e] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:18 [http-nio-auto-1-exec-6] INFO  c.c.user.controller.UserController [traceId=b43a4050-476e-4986-8862-b573b1d3d71e] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:18 [http-nio-auto-1-exec-6] DEBUG org.hibernate.SQL [traceId=b43a4050-476e-4986-8862-b573b1d3d71e] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:18 [http-nio-auto-1-exec-7] DEBUG o.s.security.web.FilterChainProxy [traceId=84cbe96e-6ed9-4405-a32f-2d6c566d44c5] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:18 [http-nio-auto-1-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=84cbe96e-6ed9-4405-a32f-2d6c566d44c5] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:18 [http-nio-auto-1-exec-7] DEBUG o.s.security.web.FilterChainProxy [traceId=84cbe96e-6ed9-4405-a32f-2d6c566d44c5] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:18 [http-nio-auto-1-exec-7] INFO  c.c.user.controller.UserController [traceId=84cbe96e-6ed9-4405-a32f-2d6c566d44c5] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:18 [http-nio-auto-1-exec-7] DEBUG org.hibernate.SQL [traceId=84cbe96e-6ed9-4405-a32f-2d6c566d44c5] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:18 [http-nio-auto-1-exec-8] DEBUG o.s.security.web.FilterChainProxy [traceId=78a1b90b-48c6-4669-a4a5-6c3163231249] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:18 [http-nio-auto-1-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=78a1b90b-48c6-4669-a4a5-6c3163231249] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:18 [http-nio-auto-1-exec-8] DEBUG o.s.security.web.FilterChainProxy [traceId=78a1b90b-48c6-4669-a4a5-6c3163231249] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:18 [http-nio-auto-1-exec-8] INFO  c.c.user.controller.UserController [traceId=78a1b90b-48c6-4669-a4a5-6c3163231249] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:18 [http-nio-auto-1-exec-8] DEBUG org.hibernate.SQL [traceId=78a1b90b-48c6-4669-a4a5-6c3163231249] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:19 [http-nio-auto-1-exec-9] DEBUG o.s.security.web.FilterChainProxy [traceId=3a4d9c65-42d2-4dd7-b0aa-a434e4399ff3] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:19 [http-nio-auto-1-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=3a4d9c65-42d2-4dd7-b0aa-a434e4399ff3] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:19 [http-nio-auto-1-exec-9] DEBUG o.s.security.web.FilterChainProxy [traceId=3a4d9c65-42d2-4dd7-b0aa-a434e4399ff3] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:19 [http-nio-auto-1-exec-9] INFO  c.c.user.controller.UserController [traceId=3a4d9c65-42d2-4dd7-b0aa-a434e4399ff3] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:19 [http-nio-auto-1-exec-9] DEBUG org.hibernate.SQL [traceId=3a4d9c65-42d2-4dd7-b0aa-a434e4399ff3] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:19 [http-nio-auto-1-exec-10] DEBUG o.s.security.web.FilterChainProxy [traceId=15b51f9e-6e15-4600-8d72-5445e5e5b044] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:19 [http-nio-auto-1-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=15b51f9e-6e15-4600-8d72-5445e5e5b044] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:19 [http-nio-auto-1-exec-10] DEBUG o.s.security.web.FilterChainProxy [traceId=15b51f9e-6e15-4600-8d72-5445e5e5b044] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:19 [http-nio-auto-1-exec-10] INFO  c.c.user.controller.UserController [traceId=15b51f9e-6e15-4600-8d72-5445e5e5b044] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:19 [http-nio-auto-1-exec-10] DEBUG org.hibernate.SQL [traceId=15b51f9e-6e15-4600-8d72-5445e5e5b044] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:20 [http-nio-auto-1-exec-1] DEBUG o.s.security.web.FilterChainProxy [traceId=a861aadf-580f-4080-a179-c500b726b7fb] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:20 [http-nio-auto-1-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=a861aadf-580f-4080-a179-c500b726b7fb] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:20 [http-nio-auto-1-exec-1] DEBUG o.s.security.web.FilterChainProxy [traceId=a861aadf-580f-4080-a179-c500b726b7fb] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:20 [http-nio-auto-1-exec-1] INFO  c.c.user.controller.UserController [traceId=a861aadf-580f-4080-a179-c500b726b7fb] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:20 [http-nio-auto-1-exec-1] DEBUG org.hibernate.SQL [traceId=a861aadf-580f-4080-a179-c500b726b7fb] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:20 [http-nio-auto-1-exec-2] DEBUG o.s.security.web.FilterChainProxy [traceId=7d94d907-a7a6-4a9b-90da-c122f1fc96c2] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:20 [http-nio-auto-1-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=7d94d907-a7a6-4a9b-90da-c122f1fc96c2] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:20 [http-nio-auto-1-exec-2] DEBUG o.s.security.web.FilterChainProxy [traceId=7d94d907-a7a6-4a9b-90da-c122f1fc96c2] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:20 [http-nio-auto-1-exec-2] INFO  c.c.user.controller.UserController [traceId=7d94d907-a7a6-4a9b-90da-c122f1fc96c2] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:20 [http-nio-auto-1-exec-2] DEBUG org.hibernate.SQL [traceId=7d94d907-a7a6-4a9b-90da-c122f1fc96c2] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:20 [http-nio-auto-1-exec-3] DEBUG o.s.security.web.FilterChainProxy [traceId=88b9b847-ae07-448d-836c-c55ba6104f38] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:20 [http-nio-auto-1-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=88b9b847-ae07-448d-836c-c55ba6104f38] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:20 [http-nio-auto-1-exec-3] DEBUG o.s.security.web.FilterChainProxy [traceId=88b9b847-ae07-448d-836c-c55ba6104f38] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:20 [http-nio-auto-1-exec-3] INFO  c.c.user.controller.UserController [traceId=88b9b847-ae07-448d-836c-c55ba6104f38] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:20 [http-nio-auto-1-exec-3] DEBUG org.hibernate.SQL [traceId=88b9b847-ae07-448d-836c-c55ba6104f38] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:21 [http-nio-auto-1-exec-4] DEBUG o.s.security.web.FilterChainProxy [traceId=d97ee906-595a-49f5-a282-eccfd59b3806] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:21 [http-nio-auto-1-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=d97ee906-595a-49f5-a282-eccfd59b3806] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:21 [http-nio-auto-1-exec-4] DEBUG o.s.security.web.FilterChainProxy [traceId=d97ee906-595a-49f5-a282-eccfd59b3806] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:21 [http-nio-auto-1-exec-4] INFO  c.c.user.controller.UserController [traceId=d97ee906-595a-49f5-a282-eccfd59b3806] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:21 [http-nio-auto-1-exec-4] DEBUG org.hibernate.SQL [traceId=d97ee906-595a-49f5-a282-eccfd59b3806] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:21 [http-nio-auto-1-exec-5] DEBUG o.s.security.web.FilterChainProxy [traceId=14a6c393-177e-4f16-8ccb-50779dab7bd0] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:21 [http-nio-auto-1-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=14a6c393-177e-4f16-8ccb-50779dab7bd0] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:21 [http-nio-auto-1-exec-5] DEBUG o.s.security.web.FilterChainProxy [traceId=14a6c393-177e-4f16-8ccb-50779dab7bd0] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:21 [http-nio-auto-1-exec-5] INFO  c.c.user.controller.UserController [traceId=14a6c393-177e-4f16-8ccb-50779dab7bd0] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:21 [http-nio-auto-1-exec-5] DEBUG org.hibernate.SQL [traceId=14a6c393-177e-4f16-8ccb-50779dab7bd0] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:22 [http-nio-auto-1-exec-6] DEBUG o.s.security.web.FilterChainProxy [traceId=8ab9f8d2-161e-4bd8-9f35-2574ca26a030] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:22 [http-nio-auto-1-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=8ab9f8d2-161e-4bd8-9f35-2574ca26a030] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:22 [http-nio-auto-1-exec-6] DEBUG o.s.security.web.FilterChainProxy [traceId=8ab9f8d2-161e-4bd8-9f35-2574ca26a030] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:22 [http-nio-auto-1-exec-6] INFO  c.c.user.controller.UserController [traceId=8ab9f8d2-161e-4bd8-9f35-2574ca26a030] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:22 [http-nio-auto-1-exec-6] DEBUG org.hibernate.SQL [traceId=8ab9f8d2-161e-4bd8-9f35-2574ca26a030] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:22 [http-nio-auto-1-exec-7] DEBUG o.s.security.web.FilterChainProxy [traceId=f1bc99e1-55f1-4f41-ab4c-213914852636] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:22 [http-nio-auto-1-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=f1bc99e1-55f1-4f41-ab4c-213914852636] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:22 [http-nio-auto-1-exec-7] DEBUG o.s.security.web.FilterChainProxy [traceId=f1bc99e1-55f1-4f41-ab4c-213914852636] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:22 [http-nio-auto-1-exec-7] INFO  c.c.user.controller.UserController [traceId=f1bc99e1-55f1-4f41-ab4c-213914852636] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:22 [http-nio-auto-1-exec-7] DEBUG org.hibernate.SQL [traceId=f1bc99e1-55f1-4f41-ab4c-213914852636] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:23 [http-nio-auto-1-exec-8] DEBUG o.s.security.web.FilterChainProxy [traceId=4d671046-2978-484a-8aa9-e925cd0490c7] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:23 [http-nio-auto-1-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=4d671046-2978-484a-8aa9-e925cd0490c7] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:23 [http-nio-auto-1-exec-8] DEBUG o.s.security.web.FilterChainProxy [traceId=4d671046-2978-484a-8aa9-e925cd0490c7] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:23 [http-nio-auto-1-exec-8] INFO  c.c.user.controller.UserController [traceId=4d671046-2978-484a-8aa9-e925cd0490c7] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:23 [http-nio-auto-1-exec-8] DEBUG org.hibernate.SQL [traceId=4d671046-2978-484a-8aa9-e925cd0490c7] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:23 [http-nio-auto-1-exec-9] DEBUG o.s.security.web.FilterChainProxy [traceId=871b40fc-b922-437b-88f0-a384f228dd5d] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:23 [http-nio-auto-1-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=871b40fc-b922-437b-88f0-a384f228dd5d] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:23 [http-nio-auto-1-exec-9] DEBUG o.s.security.web.FilterChainProxy [traceId=871b40fc-b922-437b-88f0-a384f228dd5d] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:23 [http-nio-auto-1-exec-9] INFO  c.c.user.controller.UserController [traceId=871b40fc-b922-437b-88f0-a384f228dd5d] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:23 [http-nio-auto-1-exec-9] DEBUG org.hibernate.SQL [traceId=871b40fc-b922-437b-88f0-a384f228dd5d] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:23 [http-nio-auto-1-exec-10] DEBUG o.s.security.web.FilterChainProxy [traceId=af2c7712-dfb8-4198-a658-9ef9130d6d03] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:23 [http-nio-auto-1-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=af2c7712-dfb8-4198-a658-9ef9130d6d03] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:23 [http-nio-auto-1-exec-10] DEBUG o.s.security.web.FilterChainProxy [traceId=af2c7712-dfb8-4198-a658-9ef9130d6d03] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:23 [http-nio-auto-1-exec-10] INFO  c.c.user.controller.UserController [traceId=af2c7712-dfb8-4198-a658-9ef9130d6d03] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:23 [http-nio-auto-1-exec-10] DEBUG org.hibernate.SQL [traceId=af2c7712-dfb8-4198-a658-9ef9130d6d03] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:24 [http-nio-auto-1-exec-1] DEBUG o.s.security.web.FilterChainProxy [traceId=818b6cad-25be-47bf-b75b-5f0f01c2494d] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:24 [http-nio-auto-1-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=818b6cad-25be-47bf-b75b-5f0f01c2494d] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:24 [http-nio-auto-1-exec-1] DEBUG o.s.security.web.FilterChainProxy [traceId=818b6cad-25be-47bf-b75b-5f0f01c2494d] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:24 [http-nio-auto-1-exec-1] INFO  c.c.user.controller.UserController [traceId=818b6cad-25be-47bf-b75b-5f0f01c2494d] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:24 [http-nio-auto-1-exec-1] DEBUG org.hibernate.SQL [traceId=818b6cad-25be-47bf-b75b-5f0f01c2494d] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:24 [http-nio-auto-1-exec-2] DEBUG o.s.security.web.FilterChainProxy [traceId=0fa00a1e-4e1b-4098-bd72-51ca4f0fa884] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:24 [http-nio-auto-1-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=0fa00a1e-4e1b-4098-bd72-51ca4f0fa884] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:24 [http-nio-auto-1-exec-2] DEBUG o.s.security.web.FilterChainProxy [traceId=0fa00a1e-4e1b-4098-bd72-51ca4f0fa884] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:24 [http-nio-auto-1-exec-2] INFO  c.c.user.controller.UserController [traceId=0fa00a1e-4e1b-4098-bd72-51ca4f0fa884] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:24 [http-nio-auto-1-exec-2] DEBUG org.hibernate.SQL [traceId=0fa00a1e-4e1b-4098-bd72-51ca4f0fa884] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:25 [http-nio-auto-1-exec-3] DEBUG o.s.security.web.FilterChainProxy [traceId=161de1fe-3b89-4a39-8062-e0bd5fb1a742] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:25 [http-nio-auto-1-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=161de1fe-3b89-4a39-8062-e0bd5fb1a742] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:25 [http-nio-auto-1-exec-3] DEBUG o.s.security.web.FilterChainProxy [traceId=161de1fe-3b89-4a39-8062-e0bd5fb1a742] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:25 [http-nio-auto-1-exec-3] INFO  c.c.user.controller.UserController [traceId=161de1fe-3b89-4a39-8062-e0bd5fb1a742] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:25 [http-nio-auto-1-exec-3] DEBUG org.hibernate.SQL [traceId=161de1fe-3b89-4a39-8062-e0bd5fb1a742] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:25 [http-nio-auto-1-exec-4] DEBUG o.s.security.web.FilterChainProxy [traceId=3f80eade-c7e7-4dae-a7b4-0d9ae583663e] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:25 [http-nio-auto-1-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=3f80eade-c7e7-4dae-a7b4-0d9ae583663e] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:25 [http-nio-auto-1-exec-4] DEBUG o.s.security.web.FilterChainProxy [traceId=3f80eade-c7e7-4dae-a7b4-0d9ae583663e] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:25 [http-nio-auto-1-exec-4] INFO  c.c.user.controller.UserController [traceId=3f80eade-c7e7-4dae-a7b4-0d9ae583663e] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:25 [http-nio-auto-1-exec-4] DEBUG org.hibernate.SQL [traceId=3f80eade-c7e7-4dae-a7b4-0d9ae583663e] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:25 [http-nio-auto-1-exec-5] DEBUG o.s.security.web.FilterChainProxy [traceId=e5c088f0-b111-4d37-80aa-de780366cdf8] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:25 [http-nio-auto-1-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=e5c088f0-b111-4d37-80aa-de780366cdf8] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:25 [http-nio-auto-1-exec-5] DEBUG o.s.security.web.FilterChainProxy [traceId=e5c088f0-b111-4d37-80aa-de780366cdf8] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:25 [http-nio-auto-1-exec-5] INFO  c.c.user.controller.UserController [traceId=e5c088f0-b111-4d37-80aa-de780366cdf8] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:25 [http-nio-auto-1-exec-5] DEBUG org.hibernate.SQL [traceId=e5c088f0-b111-4d37-80aa-de780366cdf8] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:26 [http-nio-auto-1-exec-6] DEBUG o.s.security.web.FilterChainProxy [traceId=47012325-6a80-44cf-beda-152ce5d3cc85] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:26 [http-nio-auto-1-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=47012325-6a80-44cf-beda-152ce5d3cc85] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:26 [http-nio-auto-1-exec-6] DEBUG o.s.security.web.FilterChainProxy [traceId=47012325-6a80-44cf-beda-152ce5d3cc85] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:26 [http-nio-auto-1-exec-6] INFO  c.c.user.controller.UserController [traceId=47012325-6a80-44cf-beda-152ce5d3cc85] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:26 [http-nio-auto-1-exec-6] DEBUG org.hibernate.SQL [traceId=47012325-6a80-44cf-beda-152ce5d3cc85] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:26 [http-nio-auto-1-exec-7] DEBUG o.s.security.web.FilterChainProxy [traceId=f7ae37e1-af13-4020-a181-0dc1004f6589] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:26 [http-nio-auto-1-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=f7ae37e1-af13-4020-a181-0dc1004f6589] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:26 [http-nio-auto-1-exec-7] DEBUG o.s.security.web.FilterChainProxy [traceId=f7ae37e1-af13-4020-a181-0dc1004f6589] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:26 [http-nio-auto-1-exec-7] INFO  c.c.user.controller.UserController [traceId=f7ae37e1-af13-4020-a181-0dc1004f6589] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:26 [http-nio-auto-1-exec-7] DEBUG org.hibernate.SQL [traceId=f7ae37e1-af13-4020-a181-0dc1004f6589] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:27 [http-nio-auto-1-exec-8] DEBUG o.s.security.web.FilterChainProxy [traceId=6a9cce2f-8106-478d-81c3-948ccb596736] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:27 [http-nio-auto-1-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=6a9cce2f-8106-478d-81c3-948ccb596736] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:27 [http-nio-auto-1-exec-8] DEBUG o.s.security.web.FilterChainProxy [traceId=6a9cce2f-8106-478d-81c3-948ccb596736] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:27 [http-nio-auto-1-exec-8] INFO  c.c.user.controller.UserController [traceId=6a9cce2f-8106-478d-81c3-948ccb596736] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:27 [http-nio-auto-1-exec-8] DEBUG org.hibernate.SQL [traceId=6a9cce2f-8106-478d-81c3-948ccb596736] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:27 [http-nio-auto-1-exec-9] DEBUG o.s.security.web.FilterChainProxy [traceId=582e0fe7-8add-4939-aef0-e3dc1f37dc02] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:27 [http-nio-auto-1-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=582e0fe7-8add-4939-aef0-e3dc1f37dc02] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:27 [http-nio-auto-1-exec-9] DEBUG o.s.security.web.FilterChainProxy [traceId=582e0fe7-8add-4939-aef0-e3dc1f37dc02] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:27 [http-nio-auto-1-exec-9] INFO  c.c.user.controller.UserController [traceId=582e0fe7-8add-4939-aef0-e3dc1f37dc02] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:27 [http-nio-auto-1-exec-9] DEBUG org.hibernate.SQL [traceId=582e0fe7-8add-4939-aef0-e3dc1f37dc02] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:27 [http-nio-auto-1-exec-10] DEBUG o.s.security.web.FilterChainProxy [traceId=3770ea9d-548d-4180-a1ac-094f6d221cd5] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:27 [http-nio-auto-1-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=3770ea9d-548d-4180-a1ac-094f6d221cd5] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:27 [http-nio-auto-1-exec-10] DEBUG o.s.security.web.FilterChainProxy [traceId=3770ea9d-548d-4180-a1ac-094f6d221cd5] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:27 [http-nio-auto-1-exec-10] INFO  c.c.user.controller.UserController [traceId=3770ea9d-548d-4180-a1ac-094f6d221cd5] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:27 [http-nio-auto-1-exec-10] DEBUG org.hibernate.SQL [traceId=3770ea9d-548d-4180-a1ac-094f6d221cd5] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:28 [http-nio-auto-1-exec-1] DEBUG o.s.security.web.FilterChainProxy [traceId=416b58b1-d87c-4438-aa8d-d9994944c284] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:28 [http-nio-auto-1-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=416b58b1-d87c-4438-aa8d-d9994944c284] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:28 [http-nio-auto-1-exec-1] DEBUG o.s.security.web.FilterChainProxy [traceId=416b58b1-d87c-4438-aa8d-d9994944c284] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:28 [http-nio-auto-1-exec-1] INFO  c.c.user.controller.UserController [traceId=416b58b1-d87c-4438-aa8d-d9994944c284] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:28 [http-nio-auto-1-exec-1] DEBUG org.hibernate.SQL [traceId=416b58b1-d87c-4438-aa8d-d9994944c284] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:28 [http-nio-auto-1-exec-2] DEBUG o.s.security.web.FilterChainProxy [traceId=5a94bb70-2ce3-476b-b8b3-0349f32269e8] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:28 [http-nio-auto-1-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=5a94bb70-2ce3-476b-b8b3-0349f32269e8] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:28 [http-nio-auto-1-exec-2] DEBUG o.s.security.web.FilterChainProxy [traceId=5a94bb70-2ce3-476b-b8b3-0349f32269e8] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:28 [http-nio-auto-1-exec-2] INFO  c.c.user.controller.UserController [traceId=5a94bb70-2ce3-476b-b8b3-0349f32269e8] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:28 [http-nio-auto-1-exec-2] DEBUG org.hibernate.SQL [traceId=5a94bb70-2ce3-476b-b8b3-0349f32269e8] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:29 [http-nio-auto-1-exec-3] DEBUG o.s.security.web.FilterChainProxy [traceId=46264c10-e291-43d2-bd90-1eb149355724] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:29 [http-nio-auto-1-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=46264c10-e291-43d2-bd90-1eb149355724] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:29 [http-nio-auto-1-exec-3] DEBUG o.s.security.web.FilterChainProxy [traceId=46264c10-e291-43d2-bd90-1eb149355724] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:29 [http-nio-auto-1-exec-3] INFO  c.c.user.controller.UserController [traceId=46264c10-e291-43d2-bd90-1eb149355724] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:29 [http-nio-auto-1-exec-3] DEBUG org.hibernate.SQL [traceId=46264c10-e291-43d2-bd90-1eb149355724] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:29 [http-nio-auto-1-exec-4] DEBUG o.s.security.web.FilterChainProxy [traceId=7cb8b152-f000-48a3-9cd0-9c2c67e48fe9] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:29 [http-nio-auto-1-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=7cb8b152-f000-48a3-9cd0-9c2c67e48fe9] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:29 [http-nio-auto-1-exec-4] DEBUG o.s.security.web.FilterChainProxy [traceId=7cb8b152-f000-48a3-9cd0-9c2c67e48fe9] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:29 [http-nio-auto-1-exec-4] INFO  c.c.user.controller.UserController [traceId=7cb8b152-f000-48a3-9cd0-9c2c67e48fe9] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:29 [http-nio-auto-1-exec-4] DEBUG org.hibernate.SQL [traceId=7cb8b152-f000-48a3-9cd0-9c2c67e48fe9] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:30 [http-nio-auto-1-exec-5] DEBUG o.s.security.web.FilterChainProxy [traceId=6ba200ff-8907-4c9c-8d27-4c9e667b8d0a] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:30 [http-nio-auto-1-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=6ba200ff-8907-4c9c-8d27-4c9e667b8d0a] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:30 [http-nio-auto-1-exec-5] DEBUG o.s.security.web.FilterChainProxy [traceId=6ba200ff-8907-4c9c-8d27-4c9e667b8d0a] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:30 [http-nio-auto-1-exec-5] INFO  c.c.user.controller.UserController [traceId=6ba200ff-8907-4c9c-8d27-4c9e667b8d0a] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:30 [http-nio-auto-1-exec-5] DEBUG org.hibernate.SQL [traceId=6ba200ff-8907-4c9c-8d27-4c9e667b8d0a] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:30 [http-nio-auto-1-exec-6] DEBUG o.s.security.web.FilterChainProxy [traceId=eacc995b-b1d2-4e8e-a454-3d6ac5eaceb0] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:30 [http-nio-auto-1-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=eacc995b-b1d2-4e8e-a454-3d6ac5eaceb0] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:30 [http-nio-auto-1-exec-6] DEBUG o.s.security.web.FilterChainProxy [traceId=eacc995b-b1d2-4e8e-a454-3d6ac5eaceb0] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:30 [http-nio-auto-1-exec-6] INFO  c.c.user.controller.UserController [traceId=eacc995b-b1d2-4e8e-a454-3d6ac5eaceb0] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:30 [http-nio-auto-1-exec-6] DEBUG org.hibernate.SQL [traceId=eacc995b-b1d2-4e8e-a454-3d6ac5eaceb0] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:30 [http-nio-auto-1-exec-7] DEBUG o.s.security.web.FilterChainProxy [traceId=d023fef5-a132-42e0-9d45-4636449f9b91] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:30 [http-nio-auto-1-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=d023fef5-a132-42e0-9d45-4636449f9b91] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:30 [http-nio-auto-1-exec-7] DEBUG o.s.security.web.FilterChainProxy [traceId=d023fef5-a132-42e0-9d45-4636449f9b91] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:30 [http-nio-auto-1-exec-7] INFO  c.c.user.controller.UserController [traceId=d023fef5-a132-42e0-9d45-4636449f9b91] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:30 [http-nio-auto-1-exec-7] DEBUG org.hibernate.SQL [traceId=d023fef5-a132-42e0-9d45-4636449f9b91] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:31 [http-nio-auto-1-exec-8] DEBUG o.s.security.web.FilterChainProxy [traceId=db9958ab-4b83-49a0-bb80-5a50aaea1352] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:31 [http-nio-auto-1-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=db9958ab-4b83-49a0-bb80-5a50aaea1352] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:31 [http-nio-auto-1-exec-8] DEBUG o.s.security.web.FilterChainProxy [traceId=db9958ab-4b83-49a0-bb80-5a50aaea1352] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:31 [http-nio-auto-1-exec-8] INFO  c.c.user.controller.UserController [traceId=db9958ab-4b83-49a0-bb80-5a50aaea1352] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:31 [http-nio-auto-1-exec-8] DEBUG org.hibernate.SQL [traceId=db9958ab-4b83-49a0-bb80-5a50aaea1352] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:31 [http-nio-auto-1-exec-9] DEBUG o.s.security.web.FilterChainProxy [traceId=aea43e8c-3496-4c1c-ab1d-417c39964fb8] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:31 [http-nio-auto-1-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=aea43e8c-3496-4c1c-ab1d-417c39964fb8] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:31 [http-nio-auto-1-exec-9] DEBUG o.s.security.web.FilterChainProxy [traceId=aea43e8c-3496-4c1c-ab1d-417c39964fb8] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:31 [http-nio-auto-1-exec-9] INFO  c.c.user.controller.UserController [traceId=aea43e8c-3496-4c1c-ab1d-417c39964fb8] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:31 [http-nio-auto-1-exec-9] DEBUG org.hibernate.SQL [traceId=aea43e8c-3496-4c1c-ab1d-417c39964fb8] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:32 [http-nio-auto-1-exec-10] DEBUG o.s.security.web.FilterChainProxy [traceId=1b70a00c-c33a-4e0a-b303-761def4b5aa7] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:32 [http-nio-auto-1-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=1b70a00c-c33a-4e0a-b303-761def4b5aa7] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:32 [http-nio-auto-1-exec-10] DEBUG o.s.security.web.FilterChainProxy [traceId=1b70a00c-c33a-4e0a-b303-761def4b5aa7] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:32 [http-nio-auto-1-exec-10] INFO  c.c.user.controller.UserController [traceId=1b70a00c-c33a-4e0a-b303-761def4b5aa7] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:32 [http-nio-auto-1-exec-10] DEBUG org.hibernate.SQL [traceId=1b70a00c-c33a-4e0a-b303-761def4b5aa7] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:32 [http-nio-auto-1-exec-1] DEBUG o.s.security.web.FilterChainProxy [traceId=824472a1-cb47-4537-a234-57cc1b9060b0] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:32 [http-nio-auto-1-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=824472a1-cb47-4537-a234-57cc1b9060b0] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:32 [http-nio-auto-1-exec-1] DEBUG o.s.security.web.FilterChainProxy [traceId=824472a1-cb47-4537-a234-57cc1b9060b0] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:32 [http-nio-auto-1-exec-1] INFO  c.c.user.controller.UserController [traceId=824472a1-cb47-4537-a234-57cc1b9060b0] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:32 [http-nio-auto-1-exec-1] DEBUG org.hibernate.SQL [traceId=824472a1-cb47-4537-a234-57cc1b9060b0] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:32 [http-nio-auto-1-exec-2] DEBUG o.s.security.web.FilterChainProxy [traceId=da0a6f3d-e00a-49b0-8a9f-490960dc0e16] - Securing GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:32 [http-nio-auto-1-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=da0a6f3d-e00a-49b0-8a9f-490960dc0e16] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:14:32 [http-nio-auto-1-exec-2] DEBUG o.s.security.web.FilterChainProxy [traceId=da0a6f3d-e00a-49b0-8a9f-490960dc0e16] - Secured GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ?page=0&size=10
2026-02-02 19:14:32 [http-nio-auto-1-exec-2] INFO  c.c.user.controller.UserController [traceId=da0a6f3d-e00a-49b0-8a9f-490960dc0e16] - GET /users/c69f1c7f-0308-46f6-aeac-bb9a2fbce99a/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:14:32 [http-nio-auto-1-exec-2] DEBUG org.hibernate.SQL [traceId=da0a6f3d-e00a-49b0-8a9f-490960dc0e16] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:14:33 [main] WARN  o.j.j.e.d.AbstractExtensionContext [traceId=] - Type implements CloseableResource but not AutoCloseable: org.testcontainers.junit.jupiter.TestcontainersExtension$StoreAdapter
2026-02-02 19:14:33 [pool-3-thread-1] ERROR com.chess.user.config.NatsConfig [traceId=] - NATS exception occurred
java.io.IOException: Read channel closed.
	at io.nats.client.impl.NatsConnectionReader.run(NatsConnectionReader.java:186)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-02 19:14:33 [pool-3-thread-1] WARN  com.chess.user.config.NatsConfig [traceId=] - NATS connection disconnected: nats://localhost:32777
2026-02-02 19:14:33 [pool-3-thread-1] ERROR com.chess.user.config.NatsConfig [traceId=] - NATS exception occurred
java.util.concurrent.ExecutionException: java.io.IOException: Failed to read initial info message.
	at java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)
	at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:205)
	at io.nats.client.impl.NatsConnection.tryToConnect(NatsConnection.java:613)
	at io.nats.client.impl.NatsConnection.reconnectImpl(NatsConnection.java:451)
	at io.nats.client.impl.NatsConnection.closeSocket(NatsConnection.java:827)
	at io.nats.client.impl.NatsConnection.lambda$handleCommunicationIssue$10(NatsConnection.java:775)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.io.IOException: Failed to read initial info message.
	at io.nats.client.impl.NatsConnection.readInitialInfo(NatsConnection.java:1790)
	at io.nats.client.impl.NatsConnection.lambda$tryToConnect$7(NatsConnection.java:592)
	... 4 common frames omitted
2026-02-02 19:14:33 [pool-3-thread-1] WARN  com.chess.user.config.NatsConfig [traceId=] - NATS connection disconnected: nats://localhost:32777
2026-02-02 19:14:33 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown [traceId=] - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-02 19:14:33 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown [traceId=] - Graceful shutdown complete
2026-02-02 19:14:33 [pool-3-thread-1] WARN  com.chess.user.config.NatsConfig [traceId=] - NATS connection closed: nats://localhost:32777
2026-02-02 19:14:33 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean [traceId=] - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-02 19:14:33 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource [traceId=] - HikariPool-1 - Shutdown initiated...
2026-02-02 19:14:33 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource [traceId=] - HikariPool-1 - Shutdown completed.
2026-02-02 19:15:35 [main] INFO  com.chess.user.it.UserServiceIT [traceId=] - Starting UserServiceIT using Java 21.0.9 with PID 49010 (started by stepan in /home/stepan/IdeaProjects/project/chess/chess-user-service)
2026-02-02 19:15:35 [main] DEBUG com.chess.user.it.UserServiceIT [traceId=] - Running with Spring Boot v4.0.2, Spring v7.0.3
2026-02-02 19:15:35 [main] INFO  com.chess.user.it.UserServiceIT [traceId=] - The following 1 profile is active: "it"
2026-02-02 19:15:35 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate [traceId=] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-02 19:15:35 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate [traceId=] - Finished Spring Data repository scanning in 33 ms. Found 4 JPA repository interfaces.
2026-02-02 19:15:36 [main] INFO  o.s.boot.tomcat.TomcatWebServer [traceId=] - Tomcat initialized with port 0 (http)
2026-02-02 19:15:36 [main] INFO  o.a.catalina.core.StandardService [traceId=] - Starting service [Tomcat]
2026-02-02 19:15:36 [main] INFO  o.a.catalina.core.StandardEngine [traceId=] - Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-02-02 19:15:36 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer [traceId=] - Root WebApplicationContext: initialization completed in 859 ms
2026-02-02 19:15:36 [main] DEBUG com.chess.user.config.JwtConfig [traceId=] - JWT Token Provider initialized for user-service
2026-02-02 19:15:36 [main] DEBUG c.c.u.s.JwtAuthenticationFilter [traceId=] - Filter 'jwtAuthenticationFilter' configured for use
2026-02-02 19:15:36 [main] DEBUG c.c.user.filter.RequestIdMdcFilter [traceId=] - Filter 'requestIdMdcFilter' configured for use
2026-02-02 19:15:36 [main] INFO  com.zaxxer.hikari.HikariDataSource [traceId=] - HikariPool-1 - Starting...
2026-02-02 19:15:36 [main] INFO  com.zaxxer.hikari.pool.HikariPool [traceId=] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@52afcdd8
2026-02-02 19:15:36 [main] INFO  com.zaxxer.hikari.HikariDataSource [traceId=] - HikariPool-1 - Start completed.
2026-02-02 19:15:36 [main] INFO  org.flywaydb.core.FlywayExecutor [traceId=] - Database: jdbc:postgresql://localhost:32779/user_it?loggerLevel=OFF (PostgreSQL 16.11)
2026-02-02 19:15:36 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory [traceId=] - Schema history table "public"."flyway_schema_history" does not exist yet
2026-02-02 19:15:36 [main] INFO  o.f.core.internal.command.DbValidate [traceId=] - Successfully validated 4 migrations (execution time 00:00.009s)
2026-02-02 19:15:36 [main] INFO  org.flywaydb.core.Flyway [traceId=] - All configured schemas are empty; baseline operation skipped. A baseline or migration script with a lower version than the baseline version may execute if available. Check the Schemas parameter if this is not intended.
2026-02-02 19:15:36 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory [traceId=] - Creating Schema History table "public"."flyway_schema_history" ...
2026-02-02 19:15:36 [main] INFO  o.f.core.internal.command.DbMigrate [traceId=] - Current version of schema "public": << Empty Schema >>
2026-02-02 19:15:36 [main] INFO  o.f.core.internal.command.DbMigrate [traceId=] - Migrating schema "public" to version "1 - create users"
2026-02-02 19:15:36 [main] INFO  o.f.core.internal.command.DbMigrate [traceId=] - Migrating schema "public" to version "2 - create ratings"
2026-02-02 19:15:36 [main] INFO  o.f.core.internal.command.DbMigrate [traceId=] - Migrating schema "public" to version "3 - create rating history"
2026-02-02 19:15:36 [main] INFO  o.f.core.internal.command.DbMigrate [traceId=] - Migrating schema "public" to version "4 - create processed event ids"
2026-02-02 19:15:36 [main] INFO  o.f.core.internal.command.DbMigrate [traceId=] - Successfully applied 4 migrations to schema "public", now at version v4 (execution time 00:00.021s)
2026-02-02 19:15:36 [main] INFO  org.hibernate.orm.jpa [traceId=] - HHH008540: Processing PersistenceUnitInfo [name: default]
2026-02-02 19:15:36 [main] INFO  org.hibernate.orm.core [traceId=] - HHH000001: Hibernate ORM core version 7.2.1.Final
2026-02-02 19:15:37 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo [traceId=] - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-02 19:15:37 [main] WARN  org.hibernate.orm.deprecation [traceId=] - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-02 19:15:37 [main] INFO  o.hibernate.orm.connections.pooling [traceId=] - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:32779/user_it?loggerLevel=OFF]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: user_it/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DataSourceConnectionProvider
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-02 19:15:37 [main] INFO  org.hibernate.orm.core [traceId=] - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-02 19:15:37 [main] INFO  org.hibernate.orm.jdbc.batch [traceId=] - HHH100501: Automatic JDBC statement batching enabled (maximum batch size 20)
2026-02-02 19:15:37 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean [traceId=] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-02 19:15:37 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories [traceId=] - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-02 19:15:37 [main] INFO  com.chess.user.config.NatsConfig [traceId=] - Connected to NATS server: nats://localhost:32780
2026-02-02 19:15:37 [pool-5-thread-1] INFO  com.chess.user.config.NatsConfig [traceId=] - NATS connection established: nats://localhost:32780
2026-02-02 19:15:37 [main] INFO  com.chess.user.config.NatsConfig [traceId=] - Created JetStream stream: USER_EVENTS subjects=domain.users.RatingUpdated
2026-02-02 19:15:37 [main] INFO  c.c.u.m.GameFinishedEventListener [traceId=] - JetStream subscribed to domain.game.GameFinished
2026-02-02 19:15:37 [main] INFO  c.c.user.messaging.UserEventListener [traceId=] - JetStream subscribed to domain.auth.UserRegistered
2026-02-02 19:15:37 [main] WARN  o.s.b.s.a.UserDetailsServiceAutoConfiguration [traceId=] - 

Using generated security password: d3d46616-0542-48ce-a7f4-0f4773f0ef0d

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-02-02 19:15:37 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer [traceId=] - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-02-02 19:15:38 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain [traceId=] - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-02-02 19:15:38 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver [traceId=] - Exposing 4 endpoints beneath base path '/actuator'
2026-02-02 19:15:38 [main] INFO  o.s.boot.tomcat.TomcatWebServer [traceId=] - Tomcat started on port 36365 (http) with context path '/'
2026-02-02 19:15:38 [main] INFO  com.chess.user.it.UserServiceIT [traceId=] - Started UserServiceIT in 3.134 seconds (process running for 5.782)
2026-02-02 19:15:38 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        count(*) 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        )=(
            ?, ?
        )
2026-02-02 19:15:38 [user-service:5] INFO  c.c.user.messaging.UserEventListener [traceId=] - Received UserRegistered event: userId=32cc4b93-075f-4fc3-9e9c-253df6e70dcf, email=it-user@mail.com
2026-02-02 19:15:38 [user-service:5] INFO  com.chess.user.service.UserService [traceId=] - Creating user profile for userId: 32cc4b93-075f-4fc3-9e9c-253df6e70dcf, email: it-user@mail.com
2026-02-02 19:15:38 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        count(*) 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:15:38 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    fetch
        first ? rows only
2026-02-02 19:15:38 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:15:38 [user-service:5] INFO  c.chess.user.service.RatingService [traceId=] - Initializing ratings for userId: 32cc4b93-075f-4fc3-9e9c-253df6e70dcf
2026-02-02 19:15:38 [user-service:5] INFO  c.chess.user.service.RatingService [traceId=] - Ratings initialized for userId: 32cc4b93-075f-4fc3-9e9c-253df6e70dcf
2026-02-02 19:15:38 [user-service:5] INFO  com.chess.user.service.UserService [traceId=] - User profile created: 32cc4b93-075f-4fc3-9e9c-253df6e70dcf
2026-02-02 19:15:38 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        users
        (avatar_url, bio, country, created_at, email, total_draws, total_games, total_losses, total_wins, updated_at, username, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:15:38 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:15:38 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:15:38 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:15:38 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:15:38 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        pee1_0.consumer,
        pee1_0.event_id,
        pee1_0.processed_at 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        ) in ((?, ?))
2026-02-02 19:15:38 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        processed_event_ids
        (processed_at, consumer, event_id) 
    values
        (?, ?, ?)
2026-02-02 19:15:39 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] [traceId=] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-02 19:15:39 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet [traceId=] - Initializing Servlet 'dispatcherServlet'
2026-02-02 19:15:39 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet [traceId=] - Completed initialization in 1 ms
2026-02-02 19:15:39 [http-nio-auto-1-exec-1] DEBUG o.s.security.web.FilterChainProxy [traceId=160bd170-c18d-45f7-9824-64bbc568d0fd] - Securing GET /users/32cc4b93-075f-4fc3-9e9c-253df6e70dcf
2026-02-02 19:15:39 [http-nio-auto-1-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=160bd170-c18d-45f7-9824-64bbc568d0fd] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:15:39 [http-nio-auto-1-exec-1] DEBUG o.s.security.web.FilterChainProxy [traceId=160bd170-c18d-45f7-9824-64bbc568d0fd] - Secured GET /users/32cc4b93-075f-4fc3-9e9c-253df6e70dcf
2026-02-02 19:15:39 [http-nio-auto-1-exec-1] INFO  c.c.user.controller.UserController [traceId=160bd170-c18d-45f7-9824-64bbc568d0fd] - GET /users/32cc4b93-075f-4fc3-9e9c-253df6e70dcf
2026-02-02 19:15:39 [http-nio-auto-1-exec-1] DEBUG org.hibernate.SQL [traceId=160bd170-c18d-45f7-9824-64bbc568d0fd] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:15:39 [http-nio-auto-1-exec-1] DEBUG org.hibernate.SQL [traceId=160bd170-c18d-45f7-9824-64bbc568d0fd] - 
    select
        r1_0.id,
        r1_0.games_played,
        r1_0.peak_rating,
        r1_0.rating,
        r1_0.rating_deviation,
        r1_0.time_control,
        r1_0.updated_at,
        r1_0.user_id,
        r1_0.volatility 
    from
        ratings r1_0 
    where
        r1_0.user_id=?
2026-02-02 19:15:39 [http-nio-auto-1-exec-2] DEBUG o.s.security.web.FilterChainProxy [traceId=d35a6386-3531-4e74-974c-b6d05efabd70] - Securing GET /users/32cc4b93-075f-4fc3-9e9c-253df6e70dcf/ratings
2026-02-02 19:15:39 [http-nio-auto-1-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=d35a6386-3531-4e74-974c-b6d05efabd70] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:15:39 [http-nio-auto-1-exec-2] DEBUG o.s.security.web.FilterChainProxy [traceId=d35a6386-3531-4e74-974c-b6d05efabd70] - Secured GET /users/32cc4b93-075f-4fc3-9e9c-253df6e70dcf/ratings
2026-02-02 19:15:39 [http-nio-auto-1-exec-2] INFO  c.c.user.controller.UserController [traceId=d35a6386-3531-4e74-974c-b6d05efabd70] - GET /users/32cc4b93-075f-4fc3-9e9c-253df6e70dcf/ratings
2026-02-02 19:15:39 [http-nio-auto-1-exec-2] DEBUG org.hibernate.SQL [traceId=d35a6386-3531-4e74-974c-b6d05efabd70] - 
    select
        r1_0.id,
        r1_0.games_played,
        r1_0.peak_rating,
        r1_0.rating,
        r1_0.rating_deviation,
        r1_0.time_control,
        r1_0.updated_at,
        r1_0.user_id,
        r1_0.volatility 
    from
        ratings r1_0 
    where
        r1_0.user_id=?
2026-02-02 19:15:39 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        count(*) 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        )=(
            ?, ?
        )
2026-02-02 19:15:39 [user-service:5] INFO  c.c.user.messaging.UserEventListener [traceId=] - Received UserRegistered event: userId=cc53c5fb-b77f-4049-914b-06cd8d4a2ce4, email=white@mail.com
2026-02-02 19:15:39 [user-service:5] INFO  com.chess.user.service.UserService [traceId=] - Creating user profile for userId: cc53c5fb-b77f-4049-914b-06cd8d4a2ce4, email: white@mail.com
2026-02-02 19:15:39 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        count(*) 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:15:39 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    fetch
        first ? rows only
2026-02-02 19:15:39 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:15:39 [user-service:5] INFO  c.chess.user.service.RatingService [traceId=] - Initializing ratings for userId: cc53c5fb-b77f-4049-914b-06cd8d4a2ce4
2026-02-02 19:15:39 [user-service:5] INFO  c.chess.user.service.RatingService [traceId=] - Ratings initialized for userId: cc53c5fb-b77f-4049-914b-06cd8d4a2ce4
2026-02-02 19:15:39 [user-service:5] INFO  com.chess.user.service.UserService [traceId=] - User profile created: cc53c5fb-b77f-4049-914b-06cd8d4a2ce4
2026-02-02 19:15:39 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        users
        (avatar_url, bio, country, created_at, email, total_draws, total_games, total_losses, total_wins, updated_at, username, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:15:39 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:15:39 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:15:39 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:15:39 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:15:39 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        pee1_0.consumer,
        pee1_0.event_id,
        pee1_0.processed_at 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        ) in ((?, ?))
2026-02-02 19:15:39 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        processed_event_ids
        (processed_at, consumer, event_id) 
    values
        (?, ?, ?)
2026-02-02 19:15:39 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        count(*) 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        )=(
            ?, ?
        )
2026-02-02 19:15:39 [user-service:5] INFO  c.c.user.messaging.UserEventListener [traceId=] - Received UserRegistered event: userId=d8c10a27-cd2e-4bda-8d92-4ada945dc632, email=black@mail.com
2026-02-02 19:15:39 [user-service:5] INFO  com.chess.user.service.UserService [traceId=] - Creating user profile for userId: d8c10a27-cd2e-4bda-8d92-4ada945dc632, email: black@mail.com
2026-02-02 19:15:39 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        count(*) 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:15:39 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    fetch
        first ? rows only
2026-02-02 19:15:39 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:15:39 [user-service:5] INFO  c.chess.user.service.RatingService [traceId=] - Initializing ratings for userId: d8c10a27-cd2e-4bda-8d92-4ada945dc632
2026-02-02 19:15:39 [user-service:5] INFO  c.chess.user.service.RatingService [traceId=] - Ratings initialized for userId: d8c10a27-cd2e-4bda-8d92-4ada945dc632
2026-02-02 19:15:39 [user-service:5] INFO  com.chess.user.service.UserService [traceId=] - User profile created: d8c10a27-cd2e-4bda-8d92-4ada945dc632
2026-02-02 19:15:39 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        users
        (avatar_url, bio, country, created_at, email, total_draws, total_games, total_losses, total_wins, updated_at, username, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:15:39 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:15:39 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:15:39 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:15:39 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:15:39 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        pee1_0.consumer,
        pee1_0.event_id,
        pee1_0.processed_at 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        ) in ((?, ?))
2026-02-02 19:15:39 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        processed_event_ids
        (processed_at, consumer, event_id) 
    values
        (?, ?, ?)
2026-02-02 19:15:39 [http-nio-auto-1-exec-3] DEBUG o.s.security.web.FilterChainProxy [traceId=5a3445f3-07a4-46f8-b0ca-d6d24048ab78] - Securing GET /users/cc53c5fb-b77f-4049-914b-06cd8d4a2ce4
2026-02-02 19:15:39 [http-nio-auto-1-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=5a3445f3-07a4-46f8-b0ca-d6d24048ab78] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:15:39 [http-nio-auto-1-exec-3] DEBUG o.s.security.web.FilterChainProxy [traceId=5a3445f3-07a4-46f8-b0ca-d6d24048ab78] - Secured GET /users/cc53c5fb-b77f-4049-914b-06cd8d4a2ce4
2026-02-02 19:15:39 [http-nio-auto-1-exec-3] INFO  c.c.user.controller.UserController [traceId=5a3445f3-07a4-46f8-b0ca-d6d24048ab78] - GET /users/cc53c5fb-b77f-4049-914b-06cd8d4a2ce4
2026-02-02 19:15:39 [http-nio-auto-1-exec-3] DEBUG org.hibernate.SQL [traceId=5a3445f3-07a4-46f8-b0ca-d6d24048ab78] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:15:39 [http-nio-auto-1-exec-3] DEBUG org.hibernate.SQL [traceId=5a3445f3-07a4-46f8-b0ca-d6d24048ab78] - 
    select
        r1_0.id,
        r1_0.games_played,
        r1_0.peak_rating,
        r1_0.rating,
        r1_0.rating_deviation,
        r1_0.time_control,
        r1_0.updated_at,
        r1_0.user_id,
        r1_0.volatility 
    from
        ratings r1_0 
    where
        r1_0.user_id=?
2026-02-02 19:15:39 [http-nio-auto-1-exec-4] DEBUG o.s.security.web.FilterChainProxy [traceId=a1ef5d28-0f63-4aea-8ce0-9820334bfc81] - Securing GET /users/d8c10a27-cd2e-4bda-8d92-4ada945dc632
2026-02-02 19:15:39 [http-nio-auto-1-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=a1ef5d28-0f63-4aea-8ce0-9820334bfc81] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:15:39 [http-nio-auto-1-exec-4] DEBUG o.s.security.web.FilterChainProxy [traceId=a1ef5d28-0f63-4aea-8ce0-9820334bfc81] - Secured GET /users/d8c10a27-cd2e-4bda-8d92-4ada945dc632
2026-02-02 19:15:39 [http-nio-auto-1-exec-4] INFO  c.c.user.controller.UserController [traceId=a1ef5d28-0f63-4aea-8ce0-9820334bfc81] - GET /users/d8c10a27-cd2e-4bda-8d92-4ada945dc632
2026-02-02 19:15:39 [http-nio-auto-1-exec-4] DEBUG org.hibernate.SQL [traceId=a1ef5d28-0f63-4aea-8ce0-9820334bfc81] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:15:39 [http-nio-auto-1-exec-4] DEBUG org.hibernate.SQL [traceId=a1ef5d28-0f63-4aea-8ce0-9820334bfc81] - 
    select
        r1_0.id,
        r1_0.games_played,
        r1_0.peak_rating,
        r1_0.rating,
        r1_0.rating_deviation,
        r1_0.time_control,
        r1_0.updated_at,
        r1_0.user_id,
        r1_0.volatility 
    from
        ratings r1_0 
    where
        r1_0.user_id=?
2026-02-02 19:15:39 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    select
        count(*) 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        )=(
            ?, ?
        )
2026-02-02 19:15:39 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:15:39 [user-service:4] INFO  com.chess.user.service.UserService [traceId=] - Game stats updated for userId: cc53c5fb-b77f-4049-914b-06cd8d4a2ce4, result: WIN
2026-02-02 19:15:39 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    update
        users 
    set
        avatar_url=?,
        bio=?,
        country=?,
        email=?,
        total_draws=?,
        total_games=?,
        total_losses=?,
        total_wins=?,
        updated_at=?,
        username=? 
    where
        id=?
2026-02-02 19:15:39 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:15:39 [user-service:4] INFO  com.chess.user.service.UserService [traceId=] - Game stats updated for userId: d8c10a27-cd2e-4bda-8d92-4ada945dc632, result: LOSS
2026-02-02 19:15:39 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    update
        users 
    set
        avatar_url=?,
        bio=?,
        country=?,
        email=?,
        total_draws=?,
        total_games=?,
        total_losses=?,
        total_wins=?,
        updated_at=?,
        username=? 
    where
        id=?
2026-02-02 19:15:39 [user-service:4] INFO  c.chess.user.service.RatingService [traceId=] - Updating rating for userId: cc53c5fb-b77f-4049-914b-06cd8d4a2ce4, opponent: d8c10a27-cd2e-4bda-8d92-4ada945dc632, timeControl: BLITZ, score: 1.0
2026-02-02 19:15:39 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    select
        r1_0.id,
        r1_0.games_played,
        r1_0.peak_rating,
        r1_0.rating,
        r1_0.rating_deviation,
        r1_0.time_control,
        r1_0.updated_at,
        r1_0.user_id,
        r1_0.volatility 
    from
        ratings r1_0 
    where
        r1_0.user_id=? 
        and r1_0.time_control=?
2026-02-02 19:15:39 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    select
        r1_0.id,
        r1_0.games_played,
        r1_0.peak_rating,
        r1_0.rating,
        r1_0.rating_deviation,
        r1_0.time_control,
        r1_0.updated_at,
        r1_0.user_id,
        r1_0.volatility 
    from
        ratings r1_0 
    where
        r1_0.user_id=? 
        and r1_0.time_control=?
2026-02-02 19:15:39 [user-service:4] INFO  c.c.u.messaging.UserEventPublisher [traceId=] - Published RatingUpdated event: userId=cc53c5fb-b77f-4049-914b-06cd8d4a2ce4, timeControl=BLITZ, newRating=1662.3108939062977
2026-02-02 19:15:39 [user-service:4] INFO  c.chess.user.service.RatingService [traceId=] - Rating updated for userId: cc53c5fb-b77f-4049-914b-06cd8d4a2ce4. Old: 1500.0, New: 1662.3108939062977
2026-02-02 19:15:39 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        rating_history
        (created_at, game_id, new_rating, new_rd, old_rating, old_rd, opponent_id, opponent_rating, rating_change, result, time_control, user_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:15:39 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    update
        ratings 
    set
        games_played=?,
        peak_rating=?,
        rating=?,
        rating_deviation=?,
        time_control=?,
        updated_at=?,
        user_id=?,
        volatility=? 
    where
        id=?
2026-02-02 19:15:39 [user-service:4] INFO  c.chess.user.service.RatingService [traceId=] - Updating rating for userId: d8c10a27-cd2e-4bda-8d92-4ada945dc632, opponent: cc53c5fb-b77f-4049-914b-06cd8d4a2ce4, timeControl: BLITZ, score: 0.0
2026-02-02 19:15:39 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    select
        r1_0.id,
        r1_0.games_played,
        r1_0.peak_rating,
        r1_0.rating,
        r1_0.rating_deviation,
        r1_0.time_control,
        r1_0.updated_at,
        r1_0.user_id,
        r1_0.volatility 
    from
        ratings r1_0 
    where
        r1_0.user_id=? 
        and r1_0.time_control=?
2026-02-02 19:15:39 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    select
        r1_0.id,
        r1_0.games_played,
        r1_0.peak_rating,
        r1_0.rating,
        r1_0.rating_deviation,
        r1_0.time_control,
        r1_0.updated_at,
        r1_0.user_id,
        r1_0.volatility 
    from
        ratings r1_0 
    where
        r1_0.user_id=? 
        and r1_0.time_control=?
2026-02-02 19:15:39 [user-service:4] INFO  c.c.u.messaging.UserEventPublisher [traceId=] - Published RatingUpdated event: userId=d8c10a27-cd2e-4bda-8d92-4ada945dc632, timeControl=BLITZ, newRating=1383.3580792733678
2026-02-02 19:15:39 [user-service:4] INFO  c.chess.user.service.RatingService [traceId=] - Rating updated for userId: d8c10a27-cd2e-4bda-8d92-4ada945dc632. Old: 1500.0, New: 1383.3580792733678
2026-02-02 19:15:39 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        rating_history
        (created_at, game_id, new_rating, new_rd, old_rating, old_rd, opponent_id, opponent_rating, rating_change, result, time_control, user_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:15:39 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    update
        ratings 
    set
        games_played=?,
        peak_rating=?,
        rating=?,
        rating_deviation=?,
        time_control=?,
        updated_at=?,
        user_id=?,
        volatility=? 
    where
        id=?
2026-02-02 19:15:39 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    select
        pee1_0.consumer,
        pee1_0.event_id,
        pee1_0.processed_at 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        ) in ((?, ?))
2026-02-02 19:15:39 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        processed_event_ids
        (processed_at, consumer, event_id) 
    values
        (?, ?, ?)
2026-02-02 19:15:39 [http-nio-auto-1-exec-5] DEBUG o.s.security.web.FilterChainProxy [traceId=d2a5b0b2-5d28-446b-9e1b-21535be9c16d] - Securing GET /users/cc53c5fb-b77f-4049-914b-06cd8d4a2ce4/rating-history/BLITZ?page=0&size=10
2026-02-02 19:15:39 [http-nio-auto-1-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=d2a5b0b2-5d28-446b-9e1b-21535be9c16d] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:15:39 [http-nio-auto-1-exec-5] DEBUG o.s.security.web.FilterChainProxy [traceId=d2a5b0b2-5d28-446b-9e1b-21535be9c16d] - Secured GET /users/cc53c5fb-b77f-4049-914b-06cd8d4a2ce4/rating-history/BLITZ?page=0&size=10
2026-02-02 19:15:39 [http-nio-auto-1-exec-5] INFO  c.c.user.controller.UserController [traceId=d2a5b0b2-5d28-446b-9e1b-21535be9c16d] - GET /users/cc53c5fb-b77f-4049-914b-06cd8d4a2ce4/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:15:39 [http-nio-auto-1-exec-5] DEBUG org.hibernate.SQL [traceId=d2a5b0b2-5d28-446b-9e1b-21535be9c16d] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:15:39 [http-nio-auto-1-exec-5] WARN  o.s.d.w.c.SpringDataJackson3Configuration$PageModule$WarningLoggingModifier [traceId=d2a5b0b2-5d28-446b-9e1b-21535be9c16d] - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-02 19:15:39 [main] WARN  o.j.j.e.d.AbstractExtensionContext [traceId=] - Type implements CloseableResource but not AutoCloseable: org.testcontainers.junit.jupiter.TestcontainersExtension$StoreAdapter
2026-02-02 19:15:39 [pool-5-thread-1] ERROR com.chess.user.config.NatsConfig [traceId=] - NATS exception occurred
java.io.IOException: Read channel closed.
	at io.nats.client.impl.NatsConnectionReader.run(NatsConnectionReader.java:186)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-02 19:15:39 [pool-5-thread-1] WARN  com.chess.user.config.NatsConfig [traceId=] - NATS connection disconnected: nats://localhost:32780
2026-02-02 19:15:39 [pool-5-thread-1] ERROR com.chess.user.config.NatsConfig [traceId=] - NATS exception occurred
java.util.concurrent.ExecutionException: java.io.IOException: Failed to read initial info message.
	at java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)
	at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:205)
	at io.nats.client.impl.NatsConnection.tryToConnect(NatsConnection.java:613)
	at io.nats.client.impl.NatsConnection.reconnectImpl(NatsConnection.java:451)
	at io.nats.client.impl.NatsConnection.closeSocket(NatsConnection.java:827)
	at io.nats.client.impl.NatsConnection.lambda$handleCommunicationIssue$10(NatsConnection.java:775)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.io.IOException: Failed to read initial info message.
	at io.nats.client.impl.NatsConnection.readInitialInfo(NatsConnection.java:1790)
	at io.nats.client.impl.NatsConnection.lambda$tryToConnect$7(NatsConnection.java:592)
	... 4 common frames omitted
2026-02-02 19:15:39 [pool-5-thread-1] WARN  com.chess.user.config.NatsConfig [traceId=] - NATS connection disconnected: nats://localhost:32780
2026-02-02 19:15:40 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown [traceId=] - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-02 19:15:40 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown [traceId=] - Graceful shutdown complete
2026-02-02 19:15:40 [pool-5-thread-1] WARN  com.chess.user.config.NatsConfig [traceId=] - NATS connection closed: nats://localhost:32780
2026-02-02 19:15:40 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean [traceId=] - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-02 19:15:40 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource [traceId=] - HikariPool-1 - Shutdown initiated...
2026-02-02 19:15:40 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource [traceId=] - HikariPool-1 - Shutdown completed.
2026-02-02 19:41:11 [main] INFO  com.chess.user.it.UserServiceIT [traceId=] - Starting UserServiceIT using Java 21.0.9 with PID 61956 (started by stepan in /home/stepan/IdeaProjects/project/chess/chess-user-service)
2026-02-02 19:41:11 [main] DEBUG com.chess.user.it.UserServiceIT [traceId=] - Running with Spring Boot v4.0.2, Spring v7.0.3
2026-02-02 19:41:11 [main] INFO  com.chess.user.it.UserServiceIT [traceId=] - The following 1 profile is active: "it"
2026-02-02 19:41:11 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate [traceId=] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-02 19:41:11 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate [traceId=] - Finished Spring Data repository scanning in 24 ms. Found 4 JPA repository interfaces.
2026-02-02 19:41:12 [main] INFO  o.s.boot.tomcat.TomcatWebServer [traceId=] - Tomcat initialized with port 0 (http)
2026-02-02 19:41:12 [main] INFO  o.a.catalina.core.StandardService [traceId=] - Starting service [Tomcat]
2026-02-02 19:41:12 [main] INFO  o.a.catalina.core.StandardEngine [traceId=] - Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-02-02 19:41:12 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer [traceId=] - Root WebApplicationContext: initialization completed in 827 ms
2026-02-02 19:41:12 [main] DEBUG com.chess.user.config.JwtConfig [traceId=] - JWT Token Provider initialized for user-service
2026-02-02 19:41:12 [main] DEBUG c.c.u.s.JwtAuthenticationFilter [traceId=] - Filter 'jwtAuthenticationFilter' configured for use
2026-02-02 19:41:12 [main] DEBUG c.c.user.filter.RequestIdMdcFilter [traceId=] - Filter 'requestIdMdcFilter' configured for use
2026-02-02 19:41:12 [main] INFO  com.zaxxer.hikari.HikariDataSource [traceId=] - HikariPool-1 - Starting...
2026-02-02 19:41:12 [main] INFO  com.zaxxer.hikari.pool.HikariPool [traceId=] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@52afcdd8
2026-02-02 19:41:12 [main] INFO  com.zaxxer.hikari.HikariDataSource [traceId=] - HikariPool-1 - Start completed.
2026-02-02 19:41:12 [main] INFO  org.flywaydb.core.FlywayExecutor [traceId=] - Database: jdbc:postgresql://localhost:32815/user_it?loggerLevel=OFF (PostgreSQL 16.11)
2026-02-02 19:41:12 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory [traceId=] - Schema history table "public"."flyway_schema_history" does not exist yet
2026-02-02 19:41:12 [main] INFO  o.f.core.internal.command.DbValidate [traceId=] - Successfully validated 4 migrations (execution time 00:00.011s)
2026-02-02 19:41:12 [main] INFO  org.flywaydb.core.Flyway [traceId=] - All configured schemas are empty; baseline operation skipped. A baseline or migration script with a lower version than the baseline version may execute if available. Check the Schemas parameter if this is not intended.
2026-02-02 19:41:12 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory [traceId=] - Creating Schema History table "public"."flyway_schema_history" ...
2026-02-02 19:41:12 [main] INFO  o.f.core.internal.command.DbMigrate [traceId=] - Current version of schema "public": << Empty Schema >>
2026-02-02 19:41:12 [main] INFO  o.f.core.internal.command.DbMigrate [traceId=] - Migrating schema "public" to version "1 - create users"
2026-02-02 19:41:12 [main] INFO  o.f.core.internal.command.DbMigrate [traceId=] - Migrating schema "public" to version "2 - create ratings"
2026-02-02 19:41:12 [main] INFO  o.f.core.internal.command.DbMigrate [traceId=] - Migrating schema "public" to version "3 - create rating history"
2026-02-02 19:41:12 [main] INFO  o.f.core.internal.command.DbMigrate [traceId=] - Migrating schema "public" to version "4 - create processed event ids"
2026-02-02 19:41:12 [main] INFO  o.f.core.internal.command.DbMigrate [traceId=] - Successfully applied 4 migrations to schema "public", now at version v4 (execution time 00:00.022s)
2026-02-02 19:41:12 [main] INFO  org.hibernate.orm.jpa [traceId=] - HHH008540: Processing PersistenceUnitInfo [name: default]
2026-02-02 19:41:12 [main] INFO  org.hibernate.orm.core [traceId=] - HHH000001: Hibernate ORM core version 7.2.1.Final
2026-02-02 19:41:12 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo [traceId=] - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-02 19:41:12 [main] WARN  org.hibernate.orm.deprecation [traceId=] - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-02 19:41:12 [main] INFO  o.hibernate.orm.connections.pooling [traceId=] - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:32815/user_it?loggerLevel=OFF]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: user_it/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DataSourceConnectionProvider
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-02 19:41:13 [main] INFO  org.hibernate.orm.core [traceId=] - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-02 19:41:13 [main] INFO  org.hibernate.orm.jdbc.batch [traceId=] - HHH100501: Automatic JDBC statement batching enabled (maximum batch size 20)
2026-02-02 19:41:13 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean [traceId=] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-02 19:41:13 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories [traceId=] - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-02 19:41:13 [main] INFO  com.chess.user.config.NatsConfig [traceId=] - Connected to NATS server: nats://localhost:32816
2026-02-02 19:41:13 [pool-5-thread-1] INFO  com.chess.user.config.NatsConfig [traceId=] - NATS connection established: nats://localhost:32816
2026-02-02 19:41:13 [main] INFO  com.chess.user.config.NatsConfig [traceId=] - Created JetStream stream: USER_EVENTS subjects=domain.users.RatingUpdated
2026-02-02 19:41:13 [main] INFO  c.c.u.m.GameFinishedEventListener [traceId=] - JetStream subscribed to domain.game.GameFinished
2026-02-02 19:41:13 [main] INFO  c.c.user.messaging.UserEventListener [traceId=] - JetStream subscribed to domain.auth.UserRegistered
2026-02-02 19:41:13 [main] WARN  o.s.b.s.a.UserDetailsServiceAutoConfiguration [traceId=] - 

Using generated security password: 744fed2e-81c5-49bb-83c5-05cb7f896cea

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-02-02 19:41:13 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer [traceId=] - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-02-02 19:41:13 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain [traceId=] - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-02-02 19:41:14 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver [traceId=] - Exposing 4 endpoints beneath base path '/actuator'
2026-02-02 19:41:14 [main] INFO  o.s.boot.tomcat.TomcatWebServer [traceId=] - Tomcat started on port 42341 (http) with context path '/'
2026-02-02 19:41:14 [main] INFO  com.chess.user.it.UserServiceIT [traceId=] - Started UserServiceIT in 3.13 seconds (process running for 5.683)
2026-02-02 19:41:14 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        count(*) 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        )=(
            ?, ?
        )
2026-02-02 19:41:14 [user-service:5] INFO  c.c.user.messaging.UserEventListener [traceId=] - Received UserRegistered event: userId=aef76e02-6cb4-41d8-8a7e-24d5e7433fd6, email=it-user@mail.com
2026-02-02 19:41:14 [user-service:5] INFO  com.chess.user.service.UserService [traceId=] - Creating user profile for userId: aef76e02-6cb4-41d8-8a7e-24d5e7433fd6, email: it-user@mail.com
2026-02-02 19:41:14 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        count(*) 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:41:14 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    fetch
        first ? rows only
2026-02-02 19:41:14 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:41:14 [user-service:5] INFO  c.chess.user.service.RatingService [traceId=] - Initializing ratings for userId: aef76e02-6cb4-41d8-8a7e-24d5e7433fd6
2026-02-02 19:41:14 [user-service:5] INFO  c.chess.user.service.RatingService [traceId=] - Ratings initialized for userId: aef76e02-6cb4-41d8-8a7e-24d5e7433fd6
2026-02-02 19:41:14 [user-service:5] INFO  com.chess.user.service.UserService [traceId=] - User profile created: aef76e02-6cb4-41d8-8a7e-24d5e7433fd6
2026-02-02 19:41:14 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        users
        (avatar_url, bio, country, created_at, email, total_draws, total_games, total_losses, total_wins, updated_at, username, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:41:14 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:41:14 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:41:14 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:41:14 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:41:14 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        pee1_0.consumer,
        pee1_0.event_id,
        pee1_0.processed_at 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        ) in ((?, ?))
2026-02-02 19:41:14 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        processed_event_ids
        (processed_at, consumer, event_id) 
    values
        (?, ?, ?)
2026-02-02 19:41:14 [http-nio-auto-1-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] [traceId=] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-02 19:41:14 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet [traceId=] - Initializing Servlet 'dispatcherServlet'
2026-02-02 19:41:14 [http-nio-auto-1-exec-1] INFO  o.s.web.servlet.DispatcherServlet [traceId=] - Completed initialization in 2 ms
2026-02-02 19:41:14 [http-nio-auto-1-exec-1] DEBUG o.s.security.web.FilterChainProxy [traceId=e39dfd24-dada-4890-9f1f-3a6e3a8a6f3f] - Securing GET /users/aef76e02-6cb4-41d8-8a7e-24d5e7433fd6
2026-02-02 19:41:14 [http-nio-auto-1-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=e39dfd24-dada-4890-9f1f-3a6e3a8a6f3f] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:41:14 [http-nio-auto-1-exec-1] DEBUG o.s.security.web.FilterChainProxy [traceId=e39dfd24-dada-4890-9f1f-3a6e3a8a6f3f] - Secured GET /users/aef76e02-6cb4-41d8-8a7e-24d5e7433fd6
2026-02-02 19:41:14 [http-nio-auto-1-exec-1] INFO  c.c.user.controller.UserController [traceId=e39dfd24-dada-4890-9f1f-3a6e3a8a6f3f] - GET /users/aef76e02-6cb4-41d8-8a7e-24d5e7433fd6
2026-02-02 19:41:14 [http-nio-auto-1-exec-1] DEBUG org.hibernate.SQL [traceId=e39dfd24-dada-4890-9f1f-3a6e3a8a6f3f] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:41:15 [http-nio-auto-1-exec-1] DEBUG org.hibernate.SQL [traceId=e39dfd24-dada-4890-9f1f-3a6e3a8a6f3f] - 
    select
        r1_0.id,
        r1_0.games_played,
        r1_0.peak_rating,
        r1_0.rating,
        r1_0.rating_deviation,
        r1_0.time_control,
        r1_0.updated_at,
        r1_0.user_id,
        r1_0.volatility 
    from
        ratings r1_0 
    where
        r1_0.user_id=?
2026-02-02 19:41:15 [http-nio-auto-1-exec-2] DEBUG o.s.security.web.FilterChainProxy [traceId=a70594e5-435c-475a-a232-8cfec9b8721c] - Securing GET /users/aef76e02-6cb4-41d8-8a7e-24d5e7433fd6/ratings
2026-02-02 19:41:15 [http-nio-auto-1-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=a70594e5-435c-475a-a232-8cfec9b8721c] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:41:15 [http-nio-auto-1-exec-2] DEBUG o.s.security.web.FilterChainProxy [traceId=a70594e5-435c-475a-a232-8cfec9b8721c] - Secured GET /users/aef76e02-6cb4-41d8-8a7e-24d5e7433fd6/ratings
2026-02-02 19:41:15 [http-nio-auto-1-exec-2] INFO  c.c.user.controller.UserController [traceId=a70594e5-435c-475a-a232-8cfec9b8721c] - GET /users/aef76e02-6cb4-41d8-8a7e-24d5e7433fd6/ratings
2026-02-02 19:41:15 [http-nio-auto-1-exec-2] DEBUG org.hibernate.SQL [traceId=a70594e5-435c-475a-a232-8cfec9b8721c] - 
    select
        r1_0.id,
        r1_0.games_played,
        r1_0.peak_rating,
        r1_0.rating,
        r1_0.rating_deviation,
        r1_0.time_control,
        r1_0.updated_at,
        r1_0.user_id,
        r1_0.volatility 
    from
        ratings r1_0 
    where
        r1_0.user_id=?
2026-02-02 19:41:15 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        count(*) 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        )=(
            ?, ?
        )
2026-02-02 19:41:15 [user-service:5] INFO  c.c.user.messaging.UserEventListener [traceId=] - Received UserRegistered event: userId=9bc5392b-dfd1-4c68-b2c1-3163e33ab82c, email=white@mail.com
2026-02-02 19:41:15 [user-service:5] INFO  com.chess.user.service.UserService [traceId=] - Creating user profile for userId: 9bc5392b-dfd1-4c68-b2c1-3163e33ab82c, email: white@mail.com
2026-02-02 19:41:15 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        count(*) 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:41:15 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    fetch
        first ? rows only
2026-02-02 19:41:15 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:41:15 [user-service:5] INFO  c.chess.user.service.RatingService [traceId=] - Initializing ratings for userId: 9bc5392b-dfd1-4c68-b2c1-3163e33ab82c
2026-02-02 19:41:15 [user-service:5] INFO  c.chess.user.service.RatingService [traceId=] - Ratings initialized for userId: 9bc5392b-dfd1-4c68-b2c1-3163e33ab82c
2026-02-02 19:41:15 [user-service:5] INFO  com.chess.user.service.UserService [traceId=] - User profile created: 9bc5392b-dfd1-4c68-b2c1-3163e33ab82c
2026-02-02 19:41:15 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        users
        (avatar_url, bio, country, created_at, email, total_draws, total_games, total_losses, total_wins, updated_at, username, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:41:15 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:41:15 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:41:15 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:41:15 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:41:15 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        pee1_0.consumer,
        pee1_0.event_id,
        pee1_0.processed_at 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        ) in ((?, ?))
2026-02-02 19:41:15 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        processed_event_ids
        (processed_at, consumer, event_id) 
    values
        (?, ?, ?)
2026-02-02 19:41:15 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        count(*) 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        )=(
            ?, ?
        )
2026-02-02 19:41:15 [user-service:5] INFO  c.c.user.messaging.UserEventListener [traceId=] - Received UserRegistered event: userId=0ed6de1a-a2b8-4201-b41b-c7f16c1b84b0, email=black@mail.com
2026-02-02 19:41:15 [user-service:5] INFO  com.chess.user.service.UserService [traceId=] - Creating user profile for userId: 0ed6de1a-a2b8-4201-b41b-c7f16c1b84b0, email: black@mail.com
2026-02-02 19:41:15 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        count(*) 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:41:15 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    fetch
        first ? rows only
2026-02-02 19:41:15 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:41:15 [user-service:5] INFO  c.chess.user.service.RatingService [traceId=] - Initializing ratings for userId: 0ed6de1a-a2b8-4201-b41b-c7f16c1b84b0
2026-02-02 19:41:15 [user-service:5] INFO  c.chess.user.service.RatingService [traceId=] - Ratings initialized for userId: 0ed6de1a-a2b8-4201-b41b-c7f16c1b84b0
2026-02-02 19:41:15 [user-service:5] INFO  com.chess.user.service.UserService [traceId=] - User profile created: 0ed6de1a-a2b8-4201-b41b-c7f16c1b84b0
2026-02-02 19:41:15 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        users
        (avatar_url, bio, country, created_at, email, total_draws, total_games, total_losses, total_wins, updated_at, username, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:41:15 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:41:15 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:41:15 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:41:15 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        ratings
        (games_played, peak_rating, rating, rating_deviation, time_control, updated_at, user_id, volatility, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:41:15 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    select
        pee1_0.consumer,
        pee1_0.event_id,
        pee1_0.processed_at 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        ) in ((?, ?))
2026-02-02 19:41:15 [user-service:5] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        processed_event_ids
        (processed_at, consumer, event_id) 
    values
        (?, ?, ?)
2026-02-02 19:41:15 [http-nio-auto-1-exec-3] DEBUG o.s.security.web.FilterChainProxy [traceId=efa6c60f-085d-4089-90c1-1c9f282e1cb2] - Securing GET /users/9bc5392b-dfd1-4c68-b2c1-3163e33ab82c
2026-02-02 19:41:15 [http-nio-auto-1-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=efa6c60f-085d-4089-90c1-1c9f282e1cb2] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:41:15 [http-nio-auto-1-exec-3] DEBUG o.s.security.web.FilterChainProxy [traceId=efa6c60f-085d-4089-90c1-1c9f282e1cb2] - Secured GET /users/9bc5392b-dfd1-4c68-b2c1-3163e33ab82c
2026-02-02 19:41:15 [http-nio-auto-1-exec-3] INFO  c.c.user.controller.UserController [traceId=efa6c60f-085d-4089-90c1-1c9f282e1cb2] - GET /users/9bc5392b-dfd1-4c68-b2c1-3163e33ab82c
2026-02-02 19:41:15 [http-nio-auto-1-exec-3] DEBUG org.hibernate.SQL [traceId=efa6c60f-085d-4089-90c1-1c9f282e1cb2] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:41:15 [http-nio-auto-1-exec-3] DEBUG org.hibernate.SQL [traceId=efa6c60f-085d-4089-90c1-1c9f282e1cb2] - 
    select
        r1_0.id,
        r1_0.games_played,
        r1_0.peak_rating,
        r1_0.rating,
        r1_0.rating_deviation,
        r1_0.time_control,
        r1_0.updated_at,
        r1_0.user_id,
        r1_0.volatility 
    from
        ratings r1_0 
    where
        r1_0.user_id=?
2026-02-02 19:41:15 [http-nio-auto-1-exec-4] DEBUG o.s.security.web.FilterChainProxy [traceId=f4f93c46-36b4-40ea-9c5e-87d2abf7939a] - Securing GET /users/0ed6de1a-a2b8-4201-b41b-c7f16c1b84b0
2026-02-02 19:41:15 [http-nio-auto-1-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=f4f93c46-36b4-40ea-9c5e-87d2abf7939a] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:41:15 [http-nio-auto-1-exec-4] DEBUG o.s.security.web.FilterChainProxy [traceId=f4f93c46-36b4-40ea-9c5e-87d2abf7939a] - Secured GET /users/0ed6de1a-a2b8-4201-b41b-c7f16c1b84b0
2026-02-02 19:41:15 [http-nio-auto-1-exec-4] INFO  c.c.user.controller.UserController [traceId=f4f93c46-36b4-40ea-9c5e-87d2abf7939a] - GET /users/0ed6de1a-a2b8-4201-b41b-c7f16c1b84b0
2026-02-02 19:41:15 [http-nio-auto-1-exec-4] DEBUG org.hibernate.SQL [traceId=f4f93c46-36b4-40ea-9c5e-87d2abf7939a] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:41:15 [http-nio-auto-1-exec-4] DEBUG org.hibernate.SQL [traceId=f4f93c46-36b4-40ea-9c5e-87d2abf7939a] - 
    select
        r1_0.id,
        r1_0.games_played,
        r1_0.peak_rating,
        r1_0.rating,
        r1_0.rating_deviation,
        r1_0.time_control,
        r1_0.updated_at,
        r1_0.user_id,
        r1_0.volatility 
    from
        ratings r1_0 
    where
        r1_0.user_id=?
2026-02-02 19:41:15 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    select
        count(*) 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        )=(
            ?, ?
        )
2026-02-02 19:41:15 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:41:15 [user-service:4] INFO  com.chess.user.service.UserService [traceId=] - Game stats updated for userId: 9bc5392b-dfd1-4c68-b2c1-3163e33ab82c, result: WIN
2026-02-02 19:41:15 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    update
        users 
    set
        avatar_url=?,
        bio=?,
        country=?,
        email=?,
        total_draws=?,
        total_games=?,
        total_losses=?,
        total_wins=?,
        updated_at=?,
        username=? 
    where
        id=?
2026-02-02 19:41:15 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    select
        u1_0.id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.country,
        u1_0.created_at,
        u1_0.email,
        u1_0.total_draws,
        u1_0.total_games,
        u1_0.total_losses,
        u1_0.total_wins,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2026-02-02 19:41:15 [user-service:4] INFO  com.chess.user.service.UserService [traceId=] - Game stats updated for userId: 0ed6de1a-a2b8-4201-b41b-c7f16c1b84b0, result: LOSS
2026-02-02 19:41:15 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    update
        users 
    set
        avatar_url=?,
        bio=?,
        country=?,
        email=?,
        total_draws=?,
        total_games=?,
        total_losses=?,
        total_wins=?,
        updated_at=?,
        username=? 
    where
        id=?
2026-02-02 19:41:15 [user-service:4] INFO  c.chess.user.service.RatingService [traceId=] - Updating rating for userId: 9bc5392b-dfd1-4c68-b2c1-3163e33ab82c, opponent: 0ed6de1a-a2b8-4201-b41b-c7f16c1b84b0, timeControl: BLITZ, score: 1.0
2026-02-02 19:41:15 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    select
        r1_0.id,
        r1_0.games_played,
        r1_0.peak_rating,
        r1_0.rating,
        r1_0.rating_deviation,
        r1_0.time_control,
        r1_0.updated_at,
        r1_0.user_id,
        r1_0.volatility 
    from
        ratings r1_0 
    where
        r1_0.user_id=? 
        and r1_0.time_control=?
2026-02-02 19:41:15 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    select
        r1_0.id,
        r1_0.games_played,
        r1_0.peak_rating,
        r1_0.rating,
        r1_0.rating_deviation,
        r1_0.time_control,
        r1_0.updated_at,
        r1_0.user_id,
        r1_0.volatility 
    from
        ratings r1_0 
    where
        r1_0.user_id=? 
        and r1_0.time_control=?
2026-02-02 19:41:15 [user-service:4] INFO  c.c.u.messaging.UserEventPublisher [traceId=] - Published RatingUpdated event: userId=9bc5392b-dfd1-4c68-b2c1-3163e33ab82c, timeControl=BLITZ, newRating=1662.3108939062977
2026-02-02 19:41:15 [user-service:4] INFO  c.chess.user.service.RatingService [traceId=] - Rating updated for userId: 9bc5392b-dfd1-4c68-b2c1-3163e33ab82c. Old: 1500.0, New: 1662.3108939062977
2026-02-02 19:41:15 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        rating_history
        (created_at, game_id, new_rating, new_rd, old_rating, old_rd, opponent_id, opponent_rating, rating_change, result, time_control, user_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:41:15 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    update
        ratings 
    set
        games_played=?,
        peak_rating=?,
        rating=?,
        rating_deviation=?,
        time_control=?,
        updated_at=?,
        user_id=?,
        volatility=? 
    where
        id=?
2026-02-02 19:41:15 [user-service:4] INFO  c.chess.user.service.RatingService [traceId=] - Updating rating for userId: 0ed6de1a-a2b8-4201-b41b-c7f16c1b84b0, opponent: 9bc5392b-dfd1-4c68-b2c1-3163e33ab82c, timeControl: BLITZ, score: 0.0
2026-02-02 19:41:15 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    select
        r1_0.id,
        r1_0.games_played,
        r1_0.peak_rating,
        r1_0.rating,
        r1_0.rating_deviation,
        r1_0.time_control,
        r1_0.updated_at,
        r1_0.user_id,
        r1_0.volatility 
    from
        ratings r1_0 
    where
        r1_0.user_id=? 
        and r1_0.time_control=?
2026-02-02 19:41:15 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    select
        r1_0.id,
        r1_0.games_played,
        r1_0.peak_rating,
        r1_0.rating,
        r1_0.rating_deviation,
        r1_0.time_control,
        r1_0.updated_at,
        r1_0.user_id,
        r1_0.volatility 
    from
        ratings r1_0 
    where
        r1_0.user_id=? 
        and r1_0.time_control=?
2026-02-02 19:41:15 [user-service:4] INFO  c.c.u.messaging.UserEventPublisher [traceId=] - Published RatingUpdated event: userId=0ed6de1a-a2b8-4201-b41b-c7f16c1b84b0, timeControl=BLITZ, newRating=1383.3580792733678
2026-02-02 19:41:15 [user-service:4] INFO  c.chess.user.service.RatingService [traceId=] - Rating updated for userId: 0ed6de1a-a2b8-4201-b41b-c7f16c1b84b0. Old: 1500.0, New: 1383.3580792733678
2026-02-02 19:41:15 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        rating_history
        (created_at, game_id, new_rating, new_rd, old_rating, old_rd, opponent_id, opponent_rating, rating_change, result, time_control, user_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-02 19:41:15 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    update
        ratings 
    set
        games_played=?,
        peak_rating=?,
        rating=?,
        rating_deviation=?,
        time_control=?,
        updated_at=?,
        user_id=?,
        volatility=? 
    where
        id=?
2026-02-02 19:41:15 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    select
        pee1_0.consumer,
        pee1_0.event_id,
        pee1_0.processed_at 
    from
        processed_event_ids pee1_0 
    where
        (
            pee1_0.consumer, pee1_0.event_id
        ) in ((?, ?))
2026-02-02 19:41:15 [user-service:4] DEBUG org.hibernate.SQL [traceId=] - 
    insert 
    into
        processed_event_ids
        (processed_at, consumer, event_id) 
    values
        (?, ?, ?)
2026-02-02 19:41:15 [http-nio-auto-1-exec-5] DEBUG o.s.security.web.FilterChainProxy [traceId=bbfdd465-238d-4c38-a0a3-47353565248a] - Securing GET /users/9bc5392b-dfd1-4c68-b2c1-3163e33ab82c/rating-history/BLITZ?page=0&size=10
2026-02-02 19:41:15 [http-nio-auto-1-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [traceId=bbfdd465-238d-4c38-a0a3-47353565248a] - Set SecurityContextHolder to anonymous SecurityContext
2026-02-02 19:41:15 [http-nio-auto-1-exec-5] DEBUG o.s.security.web.FilterChainProxy [traceId=bbfdd465-238d-4c38-a0a3-47353565248a] - Secured GET /users/9bc5392b-dfd1-4c68-b2c1-3163e33ab82c/rating-history/BLITZ?page=0&size=10
2026-02-02 19:41:15 [http-nio-auto-1-exec-5] INFO  c.c.user.controller.UserController [traceId=bbfdd465-238d-4c38-a0a3-47353565248a] - GET /users/9bc5392b-dfd1-4c68-b2c1-3163e33ab82c/rating-history/BLITZ - page: 0, size: 10
2026-02-02 19:41:15 [http-nio-auto-1-exec-5] DEBUG org.hibernate.SQL [traceId=bbfdd465-238d-4c38-a0a3-47353565248a] - 
    select
        rh1_0.id,
        rh1_0.created_at,
        rh1_0.game_id,
        rh1_0.new_rating,
        rh1_0.new_rd,
        rh1_0.old_rating,
        rh1_0.old_rd,
        rh1_0.opponent_id,
        rh1_0.opponent_rating,
        rh1_0.rating_change,
        rh1_0.result,
        rh1_0.time_control,
        rh1_0.user_id 
    from
        rating_history rh1_0 
    where
        rh1_0.user_id=? 
        and rh1_0.time_control=? 
    order by
        rh1_0.created_at desc 
    fetch
        first ? rows only
2026-02-02 19:41:15 [http-nio-auto-1-exec-5] WARN  o.s.d.w.c.SpringDataJackson3Configuration$PageModule$WarningLoggingModifier [traceId=bbfdd465-238d-4c38-a0a3-47353565248a] - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-02 19:41:15 [main] WARN  o.j.j.e.d.AbstractExtensionContext [traceId=] - Type implements CloseableResource but not AutoCloseable: org.testcontainers.junit.jupiter.TestcontainersExtension$StoreAdapter
2026-02-02 19:41:15 [pool-5-thread-1] ERROR com.chess.user.config.NatsConfig [traceId=] - NATS exception occurred
java.io.IOException: Read channel closed.
	at io.nats.client.impl.NatsConnectionReader.run(NatsConnectionReader.java:186)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-02 19:41:15 [pool-5-thread-1] WARN  com.chess.user.config.NatsConfig [traceId=] - NATS connection disconnected: nats://localhost:32816
2026-02-02 19:41:15 [pool-5-thread-1] ERROR com.chess.user.config.NatsConfig [traceId=] - NATS exception occurred
java.util.concurrent.ExecutionException: java.io.IOException: Failed to read initial info message.
	at java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)
	at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:205)
	at io.nats.client.impl.NatsConnection.tryToConnect(NatsConnection.java:613)
	at io.nats.client.impl.NatsConnection.reconnectImpl(NatsConnection.java:451)
	at io.nats.client.impl.NatsConnection.closeSocket(NatsConnection.java:827)
	at io.nats.client.impl.NatsConnection.lambda$handleCommunicationIssue$10(NatsConnection.java:775)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.io.IOException: Failed to read initial info message.
	at io.nats.client.impl.NatsConnection.readInitialInfo(NatsConnection.java:1790)
	at io.nats.client.impl.NatsConnection.lambda$tryToConnect$7(NatsConnection.java:592)
	... 4 common frames omitted
2026-02-02 19:41:15 [pool-5-thread-1] WARN  com.chess.user.config.NatsConfig [traceId=] - NATS connection disconnected: nats://localhost:32816
2026-02-02 19:41:16 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown [traceId=] - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-02 19:41:16 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown [traceId=] - Graceful shutdown complete
2026-02-02 19:41:16 [pool-5-thread-1] WARN  com.chess.user.config.NatsConfig [traceId=] - NATS connection closed: nats://localhost:32816
2026-02-02 19:41:16 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean [traceId=] - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-02 19:41:16 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource [traceId=] - HikariPool-1 - Shutdown initiated...
2026-02-02 19:41:16 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource [traceId=] - HikariPool-1 - Shutdown completed.
