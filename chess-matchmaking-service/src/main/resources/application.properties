# Server
server.port=8083

# Application
spring.application.name=chess-matchmaking-service

# Security (JWT)
# In docker-compose the gateway currently passes JWT_SECRET; we map it to jwt.secret here.
jwt.secret=${JWT_SECRET:}

# Dependencies
user-service.base-url=${USER_SERVICE_URL:http://localhost:8082}

# NATS Configuration
nats.url=${NATS_URL:nats://localhost:4222}
nats.connection-name=matchmaking-service
nats.max-reconnects=-1
nats.enabled=${NATS_ENABLED:true}

# Redis Configuration
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.timeout=2000ms
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0

# Matchmaking Configuration
matchmaking.initial-rating-range=100
matchmaking.rating-range-increment=50
matchmaking.max-rating-range=500
matchmaking.range-expansion-interval-seconds=10
matchmaking.queue-timeout-seconds=120

# Audit (PostgreSQL) - disabled by default for local runs without DB
matchmaking.audit.enabled=false

# Time controls: format timeControl -> initialSeconds, incrementSeconds (default 180+2)
# Override via matchmaking.time-controls.<key>.initial-time-seconds and .increment-seconds

# Management & Monitoring
management.endpoints.web.exposure.include=health,info,prometheus,metrics
management.endpoint.health.show-details=when-authorized
management.prometheus.metrics.export.enabled=true
management.metrics.tags.application=${spring.application.name}
management.metrics.tags.service=chess-matchmaking-service

# Logging
logging.level.root=INFO
logging.level.com.chess.matchmaking=DEBUG
logging.pattern.console=%clr(%d{yyyy-MM-dd HH:mm:ss}){faint} %clr(%5p) %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n
